<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VuePress</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/chuting.github.io/assets/css/0.styles.11c7d281.css" as="style"><link rel="preload" href="/chuting.github.io/assets/js/app.ddf6de4f.js" as="script"><link rel="preload" href="/chuting.github.io/assets/js/2.32e0a827.js" as="script"><link rel="preload" href="/chuting.github.io/assets/js/15.83dbb93a.js" as="script"><link rel="prefetch" href="/chuting.github.io/assets/js/10.607b2e0f.js"><link rel="prefetch" href="/chuting.github.io/assets/js/11.22ce7219.js"><link rel="prefetch" href="/chuting.github.io/assets/js/12.991732c2.js"><link rel="prefetch" href="/chuting.github.io/assets/js/13.9f3839f9.js"><link rel="prefetch" href="/chuting.github.io/assets/js/14.7ee2f184.js"><link rel="prefetch" href="/chuting.github.io/assets/js/16.b32daf4b.js"><link rel="prefetch" href="/chuting.github.io/assets/js/3.cf4aa34d.js"><link rel="prefetch" href="/chuting.github.io/assets/js/4.f52a9602.js"><link rel="prefetch" href="/chuting.github.io/assets/js/5.ef7a43d3.js"><link rel="prefetch" href="/chuting.github.io/assets/js/6.66a8fb3c.js"><link rel="prefetch" href="/chuting.github.io/assets/js/7.bcf25ca1.js"><link rel="prefetch" href="/chuting.github.io/assets/js/8.0a01ba2b.js"><link rel="prefetch" href="/chuting.github.io/assets/js/9.bd5b7795.js">
    <link rel="stylesheet" href="/chuting.github.io/assets/css/0.styles.11c7d281.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/chuting.github.io/" class="home-link router-link-active"><img src="https://vuejs.org/images/logo.png" alt="VuePress" class="logo"> <span class="site-name can-hide">VuePress</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue文档" class="dropdown-title"><span class="title">vue文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="vue文档" class="mobile-dropdown-title"><span class="title">vue文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://v3.cn.vuejs.org/guide/introduction.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  旧版vue3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://staging-cn.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  新版vue3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="TS文档" class="dropdown-title"><span class="title">TS文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="TS文档" class="mobile-dropdown-title"><span class="title">TS文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://jkchao.github.io/typescript-book-chinese/#why" target="_blank" rel="noopener noreferrer" class="nav-link external">
  深入理解Typescript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.tslang.cn/docs/handbook/basic-types.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  中文官网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JS文档" class="dropdown-title"><span class="title">JS文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="JS文档" class="mobile-dropdown-title"><span class="title">JS文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://es6.ruanyifeng.com/#docs/intro" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阮一峰ES6
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue文档" class="dropdown-title"><span class="title">vue文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="vue文档" class="mobile-dropdown-title"><span class="title">vue文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://v3.cn.vuejs.org/guide/introduction.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  旧版vue3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://staging-cn.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  新版vue3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="TS文档" class="dropdown-title"><span class="title">TS文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="TS文档" class="mobile-dropdown-title"><span class="title">TS文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://jkchao.github.io/typescript-book-chinese/#why" target="_blank" rel="noopener noreferrer" class="nav-link external">
  深入理解Typescript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.tslang.cn/docs/handbook/basic-types.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  中文官网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JS文档" class="dropdown-title"><span class="title">JS文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="JS文档" class="mobile-dropdown-title"><span class="title">JS文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://es6.ruanyifeng.com/#docs/intro" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阮一峰ES6
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Typescript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>TS基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>TS练习题总结</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/chuting.github.io/typescript/TS练习题总结.html" class="active sidebar-link">练习总结</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-1returntype" class="sidebar-link">No.1	returnType</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-2typesync" class="sidebar-link">No.2	typeSync</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-3setoptional-setrequired" class="sidebar-link">No.3	SetOptional&amp;SetRequired</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-4pickbyconditional" class="sidebar-link">No.4	PickByConditional</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-5unshiftarguments" class="sidebar-link">No.5	unshiftArguments</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-6flat-deepflat" class="sidebar-link">No.6	Flat&amp;DeepFlat</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-7emptyobject-takesometypeonly" class="sidebar-link">No.7	EmptyObject&amp;takeSomeTypeOnly</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-8nonemptyarray" class="sidebar-link">No.8	NonEmptyArray</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-9joinstrarray" class="sidebar-link">No.9	JoinStrArray</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-10trim" class="sidebar-link">No.10	Trim</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-11isequal" class="sidebar-link">No.11	IsEqual</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-12takeheadarray" class="sidebar-link">No.12	TakeHeadArray</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-13taketailarray" class="sidebar-link">No.13	TakeTailArray</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-14unshiftarray" class="sidebar-link">No.14	UnshiftArray</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-15shiftarray" class="sidebar-link">No.15	ShiftArray</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-16pusharray" class="sidebar-link">No.16	PushArray</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-17includes" class="sidebar-link">No.17	Includes</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-18uniontointersection" class="sidebar-link">No.18	UnionToIntersection</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-19takeoptionalkeys" class="sidebar-link">No.19	TakeOptionalKeys</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-20curry" class="sidebar-link">No.20	Curry</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-21merge" class="sidebar-link">No.21	Merge</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-22requireatleastone" class="sidebar-link">No.22	RequireAtLeastOne</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-23removeindexsignature" class="sidebar-link">No.23	RemoveIndexSignature</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-24mutable" class="sidebar-link">No.24	Mutable</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-25isunion" class="sidebar-link">No.25	IsUnion</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-26isnever" class="sidebar-link">No.26	IsNever</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-27reverse" class="sidebar-link">No.27	Reverse</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-28split" class="sidebar-link">No.28	Split</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-29topath" class="sidebar-link">No.29	ToPath</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-30chainable" class="sidebar-link">No.30	Chainable</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-31repeat" class="sidebar-link">No.31	Repeat</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-32repeatstring" class="sidebar-link">No.32	RepeatString</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-33tonumber" class="sidebar-link">No.33	ToNumber</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-34smallerthan" class="sidebar-link">No.34	SmallerThan</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-35add" class="sidebar-link">No.35	Add</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-36filter" class="sidebar-link">No.36	Filter</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-37flat" class="sidebar-link">No.37	Flat</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-38startswith-endswith" class="sidebar-link">No.38	StartsWith&amp;EndsWith</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-39isany" class="sidebar-link">No.39	IsAny</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-40anyof" class="sidebar-link">No.40	AnyOf</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-41replace" class="sidebar-link">No.41	Replace</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-42indexof" class="sidebar-link">No.42	IndexOf</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-43permutation" class="sidebar-link">No.43	Permutation</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-44unpacked" class="sidebar-link">No.44	Unpacked</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-45jsonifiedobject" class="sidebar-link">No.45	JsonifiedObject</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-46requireallornone" class="sidebar-link">No.46	RequireAllOrNone</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-47requireexactlyone" class="sidebar-link">No.47	RequireExactlyOne</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-48consistsonlyof" class="sidebar-link">No.48	ConsistsOnlyOf</a></li><li class="sidebar-sub-header"><a href="/chuting.github.io/typescript/TS练习题总结.html#no-49uniontoarray" class="sidebar-link">No.49	UnionToArray</a></li></ul></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTTP</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>WebAPI</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML&amp;CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>实现 <code>Replace</code> 工具类型，用于实现字符串类型的替换操作。具体的使用示例如下所示：</p> <div class="language- extra-class"><pre class="language-text"><code>type Replace&lt;
  S extends string,
  From extends string,
  To extends string
&gt; = // 你的实现代码 
  
type R0 = Replace&lt;'', '', ''&gt; // ''
type R1 = Replace&lt;'foobar', 'bar', 'foo'&gt; // &quot;foofoo&quot;
type R2 = Replace&lt;'foobarbar', 'bar', 'foo'&gt; // &quot;foofoobar&quot;
</code></pre></div><p>此外，继续实现 <code>ReplaceAll</code> 工具类型，用于实现替换所有满足条件的子串。具体的使用示例如下所示：</p> <div class="language- extra-class"><pre class="language-text"><code>type ReplaceAll&lt;
  S extends string,
  From extends string,
  To extends string
&gt; = // 你的实现代码 

type R0 = ReplaceAll&lt;'', '', ''&gt; // ''
type R1 = ReplaceAll&lt;'barfoo', 'bar', 'foo'&gt; // &quot;foofoo&quot;
type R2 = ReplaceAll&lt;'foobarbar', 'bar', 'foo'&gt; // &quot;foofoofoo&quot;
type R3 = ReplaceAll&lt;'foobarfoobar', 'ob', 'b'&gt; // &quot;fobarfobar&quot;
</code></pre></div><h2 id="no-1returntype"><a href="#no-1returntype" class="header-anchor">#</a> No.1	returnType</h2> <blockquote><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  kind<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">makeCustomer</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> User<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>u<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
  <span class="token comment">// Error（TS 编译器版本：v4.4.2）</span>
  <span class="token comment">// Type '{ id: number; kind: string; }' is not assignable to type 'T'.</span>
  <span class="token comment">// '{ id: number; kind: string; }' is assignable to the constraint of type 'T', </span>
  <span class="token comment">// but 'T' could be instantiated with a different subtype of constraint 'User'.</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> u<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
    kind<span class="token operator">:</span> <span class="token string">'customer'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以上代码为什么会提示错误，应该如何解决上述问题？</p></blockquote> <h3 id="分析-传入的泛型t可能不仅仅只有id和kind属性-还有其他属性-所以需要对返回的类型进行处理"><a href="#分析-传入的泛型t可能不仅仅只有id和kind属性-还有其他属性-所以需要对返回的类型进行处理" class="header-anchor">#</a> 分析：传入的泛型T可能不仅仅只有id和kind属性，还有其他属性，所以需要对返回的类型进行处理</h3> <h3 id="方法"><a href="#方法" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">User2</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span>
  kind<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">makeCustomer</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> User2<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>u<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>u<span class="token punctuation">,</span>
    id<span class="token operator">:</span> u<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
    kind<span class="token operator">:</span> <span class="token string">'customer'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="no-2typesync"><a href="#no-2typesync" class="header-anchor">#</a> No.2	typeSync</h2> <blockquote><p>本道题我们希望参数 <code>a</code> 和 <code>b</code> 的类型都是一致的，即 <code>a</code> 和 <code>b</code> 同时为 <code>number</code> 或 <code>string</code> 类型。当它们的类型不一致的值，TS 类型检查器能自动提示对应的错误信息。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> a <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> <span class="token string">':'</span> <span class="token operator">+</span> b<span class="token punctuation">;</span> <span class="token comment">// no error but b can be number!</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span> <span class="token comment">// error as b can be number | string</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Ok</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span> <span class="token comment">// Ok</span>
</code></pre></div></blockquote> <h3 id="分析-1a为number-b也为number-a为string-b也为string-返回值的类型就是string-number-容易想到函数的重载2在判断一种类型之后-那么剩余的类型就确定了-直接类型断言"><a href="#分析-1a为number-b也为number-a为string-b也为string-返回值的类型就是string-number-容易想到函数的重载2在判断一种类型之后-那么剩余的类型就确定了-直接类型断言" class="header-anchor">#</a> 分析：①a为number，b也为number，a为string，b也为string，返回值的类型就是string|number，容易想到函数的重载②在判断一种类型之后，那么剩余的类型就确定了，直接类型断言</h3> <h3 id="方法-2"><a href="#方法-2" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//answer</span>
<span class="token comment">//方案一：类型断言</span>
 <span class="token keyword">type</span> <span class="token class-name">StringAndNumber</span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span>
 <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">f</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> StringAndNumber<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> a <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> <span class="token string">':'</span> <span class="token operator">+</span> b
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> <span class="token punctuation">(</span>a <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>b <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>

<span class="token comment">//方案二：函数重载</span>
 <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>a<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span>b<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">string</span>
 <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>a<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span>b<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">number</span>
 <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> a <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> a <span class="token operator">+</span> <span class="token string">':'</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>a <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>b <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre></div><h2 id="no-3setoptional-setrequired"><a href="#no-3setoptional-setrequired" class="header-anchor">#</a> No.3	SetOptional&amp;SetRequired</h2> <blockquote><p>那么如何定义一个 <code>SetOptional</code> 工具类型，支持把给定的 keys 对应的属性变成可选的？对应的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Foo</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
	a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
	b<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
	c<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试用例</span>
<span class="token keyword">type</span> <span class="token class-name">SomeOptional</span> <span class="token operator">=</span> SetOptional<span class="token operator">&lt;</span>Foo<span class="token punctuation">,</span> <span class="token string">'a'</span> <span class="token operator">|</span> <span class="token string">'b'</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token comment">// type SomeOptional = {</span>
<span class="token comment">// 	a?: number; // 该属性已变成可选的</span>
<span class="token comment">// 	b?: string; // 保持不变</span>
<span class="token comment">// 	c: boolean; </span>
<span class="token comment">// }</span>
</code></pre></div><p>在实现 <code>SetOptional</code> 工具类型之后，如果你感兴趣，可以继续实现 <code>SetRequired</code> 工具类型，利用它可以把指定的 keys 对应的属性变成必填的。对应的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Foo</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
	a<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
	b<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
	c<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试用例</span>
<span class="token keyword">type</span> <span class="token class-name">SomeRequired</span> <span class="token operator">=</span> SetRequired<span class="token operator">&lt;</span>Foo<span class="token punctuation">,</span> <span class="token string">'b'</span> <span class="token operator">|</span> <span class="token string">'c'</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token comment">// type SomeRequired = {</span>
<span class="token comment">// 	a?: number;</span>
<span class="token comment">// 	b: string; // 保持不变</span>
<span class="token comment">// 	c: boolean; // 该属性已变成必填</span>
<span class="token comment">// }</span>
</code></pre></div></blockquote> <h3 id="分析-1、setoptional-利用现有的ts内置工具类partial-pick、omit-pick-exclude-实现将选中的属性变为可选、选出剩余的属性的功能-之后将两者用-结合-实现setoptional功能-最后创建simplify类型-实现类型结构的扁平化-转为一个简单的结构类型-视觉上呈现为-鼠标移入someoptional时-能够呈现内部的结构-2、setrequired-逻辑同上-利用ts内置的工具类required-pick、omit实现将选中的属性变为必选、选出剩余属性的功能"><a href="#分析-1、setoptional-利用现有的ts内置工具类partial-pick、omit-pick-exclude-实现将选中的属性变为可选、选出剩余的属性的功能-之后将两者用-结合-实现setoptional功能-最后创建simplify类型-实现类型结构的扁平化-转为一个简单的结构类型-视觉上呈现为-鼠标移入someoptional时-能够呈现内部的结构-2、setrequired-逻辑同上-利用ts内置的工具类required-pick、omit实现将选中的属性变为必选、选出剩余属性的功能" class="header-anchor">#</a> 分析：1、SetOptional：利用现有的TS内置工具类Partial+Pick、Omit(Pick+Exclude)实现将选中的属性变为可选、选出剩余的属性的功能，之后将两者用&amp;结合，实现setOptional功能，最后创建Simplify类型，实现类型结构的扁平化，转为一个简单的结构类型（视觉上呈现为，鼠标移入SomeOptional时，能够呈现内部的结构）2、SetRequired：逻辑同上，利用TS内置的工具类Required+Pick、Omit实现将选中的属性变为必选、选出剩余属性的功能</h3> <h3 id="方法-3"><a href="#方法-3" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//question1</span>
<span class="token comment">// 那么如何定义一个 SetOptional 工具类型，支持把给定的 keys 对应的属性变成可选的？对应的使用示例如下所示：</span>
<span class="token comment">// type Foo = {</span>
<span class="token comment">// 	a: number;</span>
<span class="token comment">// 	b?: string;</span>
<span class="token comment">// 	c: boolean;</span>
<span class="token comment">// }</span>
<span class="token comment">// 测试用例</span>
<span class="token comment">// type SomeOptional = SetOptional&lt;Foo, 'a' | 'b'&gt;;</span>
<span class="token comment">// type SomeOptional = {</span>
<span class="token comment">// 	a?: number; // 该属性已变成可选的</span>
<span class="token comment">// 	b?: string; // 保持不变</span>
<span class="token comment">// 	c: boolean;</span>
<span class="token comment">// }</span>

<span class="token comment">//answer  泛型+映射   全部变为可选&amp;不变的那个</span>
<span class="token comment">// type Simplify&lt;T&gt; = {</span>
<span class="token comment">//   [P in keyof T]: T[P]</span>
<span class="token comment">// }</span>
<span class="token comment">// type SetOptional&lt;T, K extends keyof T&gt; =</span>
<span class="token comment">//   Simplify&lt;Partial&lt;Pick&lt;T, K&gt;&gt; &amp; Pick&lt;T, Exclude&lt;keyof T, K&gt;&gt;&gt;</span>

<span class="token comment">//question2</span>
<span class="token comment">// 在实现 SetOptional 工具类型之后，如果你感兴趣，可以继续实现 SetRequired 工具类型，利用它可以把指定的 keys 对应的属性变成必填的。对应的使用示例如下所示：</span>
<span class="token comment">// type Foo = {</span>
<span class="token comment">// 	a?: number;</span>
<span class="token comment">// 	b: string;</span>
<span class="token comment">// 	c?: boolean;</span>
<span class="token comment">// }</span>
<span class="token comment">// 测试用例</span>
<span class="token comment">// type SomeRequired = SetRequired&lt;Foo, 'b' | 'c'&gt;;</span>
<span class="token comment">// type SomeRequired = {</span>
<span class="token comment">// 	a?: number;</span>
<span class="token comment">// 	b: string; // 保持不变</span>
<span class="token comment">// 	c: boolean; // 该属性已变成必填</span>
<span class="token comment">// }</span>

<span class="token comment">//answer  泛型+映射   全部变为必填&amp;不变的那个</span>
<span class="token comment">// type Simplify&lt;T&gt; = {</span>
<span class="token comment">//   [P in keyof T]: T[P]</span>
<span class="token comment">// }</span>
<span class="token comment">// type SetRequired&lt;T, K extends keyof T&gt; = Simplify&lt;Pick&lt;T, Exclude&lt;keyof T, K&gt;&gt; &amp; Required&lt;Pick&lt;T, K&gt;&gt;&gt;</span>

</code></pre></div><h2 id="no-4pickbyconditional"><a href="#no-4pickbyconditional" class="header-anchor">#</a> No.4	PickByConditional</h2> <blockquote><p>如何定义一个 <code>ConditionalPick</code> 工具类型，支持根据指定的 <code>Condition</code> 条件来生成新的类型，对应的使用示例如下：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Example</span> <span class="token punctuation">{</span>
	a<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
	b<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
	<span class="token function-variable function">c</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
	d<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试用例：</span>
<span class="token keyword">type</span> <span class="token class-name">StringKeysOnly</span> <span class="token operator">=</span> ConditionalPick<span class="token operator">&lt;</span>Example<span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token comment">//=&gt; {a: string}</span>
</code></pre></div></blockquote> <h3 id="分析-根据原有类型选出对应的类型-容易想到映射类型-对原有的类型进行一个遍历-再利用条件类型进行判断-从而选出匹配的类型"><a href="#分析-根据原有类型选出对应的类型-容易想到映射类型-对原有的类型进行一个遍历-再利用条件类型进行判断-从而选出匹配的类型" class="header-anchor">#</a> 分析：根据原有类型选出对应的类型，容易想到映射类型，对原有的类型进行一个遍历，再利用条件类型进行判断，从而选出匹配的类型</h3> <h3 id="方法-4"><a href="#方法-4" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">ConditionalPick<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">V</span> <span class="token keyword">as</span> <span class="token constant">V</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">?</span> <span class="token constant">K</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">V</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Example</span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span> <span class="token builtin">string</span>
  b<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span>
  <span class="token function-variable function">c</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
  d<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">StringKeysOnly</span> <span class="token operator">=</span> ConditionalPick<span class="token operator">&lt;</span>Example<span class="token punctuation">,</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token operator">&gt;</span>
</code></pre></div><h2 id="no-5unshiftarguments"><a href="#no-5unshiftarguments" class="header-anchor">#</a> No.5	unshiftArguments</h2> <blockquote><p>定义一个工具类型 <code>AppendArgument</code>，为已有的函数类型增加指定类型的参数，新增的参数名是 <code>x</code>，将作为新函数类型的第一个参数。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span>
<span class="token keyword">type</span> <span class="token class-name">AppendArgument<span class="token operator">&lt;</span><span class="token constant">F</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name">FinalFn</span> <span class="token operator">=</span> AppendArgument<span class="token operator">&lt;</span>Fn<span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token operator">&gt;</span> 
<span class="token comment">// (x: boolean, a: number, b: string) =&gt; number</span>
</code></pre></div></blockquote> <h3 id="分析-1为原有的函数类型添加新的形参-首先要获取原函数的形参类型和返回值类型-利用ts内置的工具类parameters、returntype即可获取对应的类型-最后只需将x添加至形参列表头部其类型依靠传入的类型-其他原函数的形参通过函数的剩余参数绑定到一起其类型就是前面parameters获得的类型2不借助工具类-利用两个连续的infer-推断出原函数的形参、返回值类型-相当于手写了parameters、returntype"><a href="#分析-1为原有的函数类型添加新的形参-首先要获取原函数的形参类型和返回值类型-利用ts内置的工具类parameters、returntype即可获取对应的类型-最后只需将x添加至形参列表头部其类型依靠传入的类型-其他原函数的形参通过函数的剩余参数绑定到一起其类型就是前面parameters获得的类型2不借助工具类-利用两个连续的infer-推断出原函数的形参、返回值类型-相当于手写了parameters、returntype" class="header-anchor">#</a> 分析：①为原有的函数类型添加新的形参，首先要获取原函数的形参类型和返回值类型，利用TS内置的工具类Parameters、ReturnType即可获取对应的类型，最后只需将x添加至形参列表头部其类型依靠传入的类型，其他原函数的形参通过函数的剩余参数绑定到一起其类型就是前面Parameters获得的类型②不借助工具类，利用两个连续的infer，推断出原函数的形参、返回值类型，相当于手写了Parameters、ReturnType</h3> <h3 id="方法-5"><a href="#方法-5" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//answer1   借助parameters 和 returntype 推出函数原来的形参类型和返回值类型</span>
<span class="token keyword">type</span> <span class="token class-name">AppendArgument<span class="token operator">&lt;</span><span class="token constant">F</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">A</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token operator">:</span> Parameters<span class="token operator">&lt;</span><span class="token constant">F</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ReturnType<span class="token operator">&lt;</span><span class="token constant">F</span><span class="token operator">&gt;</span>
<span class="token keyword">type</span> <span class="token class-name">Fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span>
<span class="token keyword">type</span> <span class="token class-name">FinalF</span> <span class="token operator">=</span> AppendArgument<span class="token operator">&lt;</span>Fn<span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token operator">&gt;</span>
<span class="token comment">//answer2   借助infer 推出函数原来的形参类型和返回值类型</span>
<span class="token keyword">type</span> <span class="token class-name">AppendArgument<span class="token operator">&lt;</span><span class="token constant">F</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">F</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token keyword">infer</span> Args<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">infer</span> Return <span class="token operator">?</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token operator">:</span> Args<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Return <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token keyword">type</span> <span class="token class-name">Fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span>
<span class="token keyword">type</span> <span class="token class-name">FinalFn</span> <span class="token operator">=</span> AppendArgument<span class="token operator">&lt;</span>Fn<span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token operator">&gt;</span>
</code></pre></div><h2 id="no-6flat-deepflat"><a href="#no-6flat-deepflat" class="header-anchor">#</a> No.6	Flat&amp;DeepFlat</h2> <blockquote><p>定义一个 NativeFlat 工具类型，支持把数组类型拍平（扁平化）。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">NaiveFlat<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token comment">// 测试用例：</span>
<span class="token keyword">type</span> <span class="token class-name">NaiveResult</span> <span class="token operator">=</span> NaiveFlat<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'d'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
<span class="token comment">// NaiveResult的结果： &quot;a&quot; | &quot;b&quot; | &quot;c&quot; | &quot;d&quot;</span>
</code></pre></div><p>在完成 <code>NaiveFlat</code> 工具类型之后，在继续实现 <code>DeepFlat</code> 工具类型，以支持多维数组类型：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">DeepFlat<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token comment">// 你的实现代码</span>

<span class="token comment">// 测试用例</span>
<span class="token keyword">type</span> <span class="token class-name">Deep</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'d'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'e'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">DeepTestResult</span> <span class="token operator">=</span> DeepFlat<span class="token operator">&lt;</span>Deep<span class="token operator">&gt;</span>  
<span class="token comment">// DeepTestResult: &quot;a&quot; | &quot;b&quot; | &quot;c&quot; | &quot;d&quot; | &quot;e&quot;</span>
</code></pre></div></blockquote> <h3 id="分析-1naiveflat-前提为数组为二维数组-容易想到映射类型-条件类型的判断对数组进行-降维-如果为数组就为t-p-number-结果就是一个数组成员类型的联合类型-不为数组就返回自身-最后再返回整体的-number-即数组中所有成员的联合类型2要满足多维数组的-降维-必定要进行递归操作-也是一个通用方法-如果为数组就从头开始判断-不是数组就返回"><a href="#分析-1naiveflat-前提为数组为二维数组-容易想到映射类型-条件类型的判断对数组进行-降维-如果为数组就为t-p-number-结果就是一个数组成员类型的联合类型-不为数组就返回自身-最后再返回整体的-number-即数组中所有成员的联合类型2要满足多维数组的-降维-必定要进行递归操作-也是一个通用方法-如果为数组就从头开始判断-不是数组就返回" class="header-anchor">#</a> 分析：①NaiveFlat，前提为数组为二维数组，容易想到映射类型+条件类型的判断对数组进行&quot;降维&quot;,如果为数组就为T[P] [number] 结果就是一个数组成员类型的联合类型，不为数组就返回自身，最后再返回整体的[number]，即数组中所有成员的联合类型②要满足多维数组的&quot;降维&quot;，必定要进行递归操作，也是一个通用方法，如果为数组就从头开始判断，不是数组就返回</h3> <h3 id="方法-6"><a href="#方法-6" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//question1</span>
<span class="token comment">// 定义一个 NativeFlat 工具类型，支持把数组类型拍平（扁平化）。具体的使用示例如下所示：</span>
<span class="token comment">// type NaiveFlat&lt;T extends any[]&gt; = // 你的实现代码</span>
<span class="token comment">// 测试用例：</span>
<span class="token comment">// type NaiveResult = NaiveFlat&lt;[['a'], ['b', 'c'], ['d']]&gt;</span>
<span class="token comment">// NaiveResult的结果： &quot;a&quot; | &quot;b&quot; | &quot;c&quot; | &quot;d&quot;</span>
<span class="token comment">//answer</span>
<span class="token comment">// type NaiveFlat&lt;T extends any[]&gt; = {</span>
<span class="token comment">//   [P in keyof T]: T[P] extends any[] ? T[P][number] : T[P]</span>
<span class="token comment">// }[number]</span>
<span class="token comment">// type NaiveResult = NaiveFlat&lt;[['a'], ['b', 'c'], ['d']]&gt;</span>

<span class="token comment">//question2</span>
<span class="token comment">// 在完成 NaiveFlat 工具类型之后，在继续实现 DeepFlat 工具类型，以支持多维数组类型：</span>
<span class="token comment">// type DeepFlat&lt;T extends any[]&gt; = unknown // 你的实现代码</span>
<span class="token comment">// 测试用例</span>
<span class="token comment">// type Deep = [['a'], ['b', 'c'], [['d']], [[[['e']]]]];</span>
<span class="token comment">// type DeepTestResult = DeepFlat&lt;Deep&gt;</span>
<span class="token comment">// DeepTestResult: &quot;a&quot; | &quot;b&quot; | &quot;c&quot; | &quot;d&quot; | &quot;e&quot;</span>
<span class="token comment">//answer</span>
<span class="token comment">// type DeepFlat&lt;T extends any[]&gt; = T extends (infer P)[] ? (P extends any[] ? DeepFlat&lt;P&gt; : P) : never</span>
<span class="token comment">// type DeepFlat&lt;T extends any[]&gt; = {</span>
<span class="token comment">//   [K in keyof T]: T[K] extends any[] ? DeepFlat&lt;T[K]&gt; : T[K]</span>
<span class="token comment">// }[number]</span>
<span class="token comment">// type Deep = [['a'], ['b', 'c'], [['d']], [[[['e']]]]]</span>
<span class="token comment">// type DeepTestResult = DeepFlat&lt;Deep&gt;</span>
</code></pre></div><h2 id="no-7emptyobject-takesometypeonly"><a href="#no-7emptyobject-takesometypeonly" class="header-anchor">#</a> No.7	EmptyObject&amp;takeSomeTypeOnly</h2> <blockquote><p>使用类型别名定义一个 <code>EmptyObject</code> 类型，使得该类型只允许空对象赋值：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">EmptyObject</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> 

<span class="token comment">// 测试用例</span>
<span class="token keyword">const</span> shouldPass<span class="token operator">:</span> EmptyObject <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 可以正常赋值</span>
<span class="token keyword">const</span> shouldFail<span class="token operator">:</span> EmptyObject <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// 将出现编译错误</span>
  prop<span class="token operator">:</span> <span class="token string">&quot;TS&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在通过 <code>EmptyObject</code> 类型的测试用例检测后，我们来更改以下 <code>takeSomeTypeOnly</code> 函数的类型定义，让它的参数只允许严格SomeType类型的值。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">SomeType</span> <span class="token operator">=</span>  <span class="token punctuation">{</span>
  prop<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// 更改以下函数的类型定义，让它的参数只允许严格SomeType类型的值</span>
<span class="token keyword">function</span> <span class="token function">takeSomeTypeOnly</span><span class="token punctuation">(</span>x<span class="token operator">:</span> SomeType<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> x <span class="token punctuation">}</span>

<span class="token comment">// 测试用例：</span>
<span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token punctuation">{</span> prop<span class="token operator">:</span> <span class="token string">'a'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">takeSomeTypeOnly</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token comment">// 可以正常调用</span>

<span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token punctuation">{</span> prop<span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span> addditionalProp<span class="token operator">:</span> <span class="token string">'x'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">takeSomeTypeOnly</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token comment">// 将出现编译错误</span>
</code></pre></div></blockquote> <h3 id="分析-1、映射类型中-键的类型只能为string、number或symbol-要想只能赋空对象-只需要把对应的属性设置为never-2、大致题意为只允许传入的形参中出现prop这个属性-首先需要定义exclusive-t1-t2-类型-作用就是找出t2中与t1相同的那个属性-这个属性就是之后传入的形参的唯一属性-最终exclusive-t1-t2-返回的类型就是形参中传入的类型"><a href="#分析-1、映射类型中-键的类型只能为string、number或symbol-要想只能赋空对象-只需要把对应的属性设置为never-2、大致题意为只允许传入的形参中出现prop这个属性-首先需要定义exclusive-t1-t2-类型-作用就是找出t2中与t1相同的那个属性-这个属性就是之后传入的形参的唯一属性-最终exclusive-t1-t2-返回的类型就是形参中传入的类型" class="header-anchor">#</a> 分析：1、映射类型中，键的类型只能为string、number或symbol，要想只能赋空对象，只需要把对应的属性设置为never 2、大致题意为只允许传入的形参中出现prop这个属性，首先需要定义<em>Exclusive</em>&lt;T1,T2&gt;类型，作用就是找出T2中与T1相同的那个属性，这个属性就是之后传入的形参的唯一属性，最终<em>Exclusive</em>&lt;T1,T2&gt;返回的类型就是形参中传入的类型</h3> <h3 id="方法-7"><a href="#方法-7" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//question1</span>
<span class="token comment">// 使用类型别名定义一个 EmptyObject 类型，使得该类型只允许空对象赋值：</span>
<span class="token comment">// type EmptyObject = {}</span>
<span class="token comment">// 测试用例</span>
<span class="token comment">// const shouldPass: EmptyObject = {}; // 可以正常赋值</span>
<span class="token comment">// const shouldFail: EmptyObject = { // 将出现编译错误</span>
<span class="token comment">//   prop: &quot;TS&quot;</span>
<span class="token comment">// }</span>
<span class="token comment">//answer</span>
<span class="token comment">// type EmptyObject = {</span>
<span class="token comment">//   [K in string | number | symbol]: never</span>
<span class="token comment">// }</span>

<span class="token comment">//question2</span>
<span class="token comment">// 在通过 EmptyObject 类型的测试用例检测后，我们来更改以下 takeSomeTypeOnly 函数的类型定义，让它的参数只允许严格SomeType类型的值。具体的使用示例如下所示：</span>
<span class="token comment">// type SomeType =  {</span>
<span class="token comment">//   prop: string</span>
<span class="token comment">// }</span>
<span class="token comment">// 更改以下函数的类型定义，让它的参数只允许严格SomeType类型的值</span>
<span class="token comment">// function takeSomeTypeOnly(x: SomeType) { return x }</span>
<span class="token comment">// 测试用例：</span>
<span class="token comment">// const x = { prop: 'a' };</span>
<span class="token comment">// takeSomeTypeOnly(x) // 可以正常调用</span>
<span class="token comment">// const y = { prop: 'a', addditionalProp: 'x' };</span>
<span class="token comment">// takeSomeTypeOnly(y) // 将出现编译错误</span>
<span class="token comment">//answer</span>
<span class="token comment">// type Exclusive&lt;T1, T2 extends T1&gt; = {</span>
<span class="token comment">//   [K in keyof T2]: K extends keyof T1 ? T2[K] : never</span>
<span class="token comment">// }</span>
<span class="token comment">// type SomeType =  {</span>
<span class="token comment">//     prop: string</span>
<span class="token comment">//   }</span>
<span class="token comment">// function takeSomeTypeOnly&lt;T extends SomeType&gt;(x: Exclusive&lt;SomeType, T&gt;) { return x }</span>
<span class="token comment">// const y = { prop: 'a', addditionalProp: 'x' };</span>
<span class="token comment">// takeSomeTypeOnly(y) // 将出现编译错误</span>
</code></pre></div><h2 id="no-8nonemptyarray"><a href="#no-8nonemptyarray" class="header-anchor">#</a> No.8	NonEmptyArray</h2> <blockquote><p>定义 <code>NonEmptyArray</code> 工具类型，用于确保数据非空数组。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">NonEmptyArray<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">const</span> a<span class="token operator">:</span> NonEmptyArray<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 将出现编译错误</span>
<span class="token keyword">const</span> b<span class="token operator">:</span> NonEmptyArray<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Hello TS'</span><span class="token punctuation">]</span> <span class="token comment">// 非空数据，正常使用</span>
</code></pre></div></blockquote> <h3 id="分析-1要确保非空-只需关心第一个元素的类型-容易想到t-与-0-t-的交叉类型2确定数组中每个元素的个数和类型-容易想到元组-t-t"><a href="#分析-1要确保非空-只需关心第一个元素的类型-容易想到t-与-0-t-的交叉类型2确定数组中每个元素的个数和类型-容易想到元组-t-t" class="header-anchor">#</a> 分析：①要确保非空，只需关心第一个元素的类型，容易想到T[]与{0:T}的交叉类型②确定数组中每个元素的个数和类型，容易想到元组[T,...T[]]</h3> <h3 id="方法-8"><a href="#方法-8" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//question</span>
<span class="token comment">// 定义 NonEmptyArray 工具类型，用于确保数据非空数组。</span>
<span class="token comment">// type NonEmptyArray&lt;T&gt; = // 你的实现代码</span>
<span class="token comment">// const a: NonEmptyArray&lt;string&gt; = [] // 将出现编译错误</span>
<span class="token comment">// const b: NonEmptyArray&lt;string&gt; = ['Hello TS'] // 非空数据，正常使用</span>

<span class="token comment">//answer1    元组</span>
<span class="token comment">// type NonEmptyArray&lt;T&gt; =  [T, ...T[]]</span>
<span class="token comment">// const a: NonEmptyArray&lt;string&gt; = []</span>
<span class="token comment">// const b: NonEmptyArray&lt;string&gt; = ['Hello TS']</span>

<span class="token comment">//answer2    交叉类型</span>
<span class="token comment">// type NonEmptyArray&lt;T&gt; = T[] &amp; { 0: T }</span>
</code></pre></div><h2 id="no-9joinstrarray"><a href="#no-9joinstrarray" class="header-anchor">#</a> No.9	JoinStrArray</h2> <blockquote><p>定义一个 <code>JoinStrArray</code> 工具类型，用于根据指定的 <code>Separator</code> 分隔符，对字符串数组类型进行拼接。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">JoinStrArray<span class="token operator">&lt;</span>Arr <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Separator <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> Result <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token comment">// 测试用例</span>
<span class="token keyword">type</span> <span class="token class-name">Names</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Sem&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Lolo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Kaquko&quot;</span><span class="token punctuation">]</span>
<span class="token keyword">type</span> <span class="token class-name">NamesComma</span> <span class="token operator">=</span> JoinStrArray<span class="token operator">&lt;</span>Names<span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token operator">&gt;</span> <span class="token comment">// &quot;Sem,Lolo,Kaquko&quot;</span>
<span class="token keyword">type</span> <span class="token class-name">NamesSpace</span> <span class="token operator">=</span> JoinStrArray<span class="token operator">&lt;</span>Names<span class="token punctuation">,</span> <span class="token string">&quot; &quot;</span><span class="token operator">&gt;</span> <span class="token comment">// &quot;Sem Lolo Kaquko&quot;</span>
<span class="token keyword">type</span> <span class="token class-name">NamesStars</span> <span class="token operator">=</span> JoinStrArray<span class="token operator">&lt;</span>Names<span class="token punctuation">,</span> <span class="token string">&quot;⭐️&quot;</span><span class="token operator">&gt;</span> <span class="token comment">// &quot;Sem⭐️Lolo⭐️Kaquko&quot;</span>
</code></pre></div></blockquote> <h3 id="分析-利用模板字面量类型-元组-剩余参数对每一次数组的第一项进行提取-再利用模板字面量进行字符串的拼接-拼接的结果作为下一次的递归的result-以此类推"><a href="#分析-利用模板字面量类型-元组-剩余参数对每一次数组的第一项进行提取-再利用模板字面量进行字符串的拼接-拼接的结果作为下一次的递归的result-以此类推" class="header-anchor">#</a> 分析：利用模板字面量类型+元组+剩余参数对每一次数组的第一项进行提取，再利用模板字面量进行字符串的拼接，拼接的结果作为下一次的递归的result，以此类推</h3> <img src="D:\A-Space\ChuTing\Konwledge is infinite🤑\前端\images\JoinStrArray.jpg" style="zoom:25%;"> <h3 id="方法-9"><a href="#方法-9" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">JoinStrArray<span class="token operator">&lt;</span>Arr <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Separator <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> Result <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> Arr <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> El<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> Rest<span class="token punctuation">]</span>
  <span class="token operator">?</span> Rest <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token operator">?</span> El <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span>
      <span class="token operator">?</span> Result <span class="token keyword">extends</span> <span class="token string">''</span>
        <span class="token operator">?</span> JoinStrArray<span class="token operator">&lt;</span>Rest<span class="token punctuation">,</span> Separator<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>El<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token operator">&gt;</span>
        <span class="token operator">:</span> JoinStrArray<span class="token operator">&lt;</span>Rest<span class="token punctuation">,</span> Separator<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Separator<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>El<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token operator">&gt;</span>
      <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token keyword">type</span> <span class="token class-name">Names</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Sem'</span><span class="token punctuation">,</span> <span class="token string">'Lolo'</span><span class="token punctuation">,</span> <span class="token string">'Kaquko'</span><span class="token punctuation">]</span>
<span class="token keyword">type</span> <span class="token class-name">NamesComma</span> <span class="token operator">=</span> JoinStrArray<span class="token operator">&lt;</span>Names<span class="token punctuation">,</span> <span class="token string">','</span><span class="token operator">&gt;</span> <span class="token comment">// &quot;Sem,Lolo,Kaquko&quot;</span>
<span class="token keyword">type</span> <span class="token class-name">NamesSpace</span> <span class="token operator">=</span> JoinStrArray<span class="token operator">&lt;</span>Names<span class="token punctuation">,</span> <span class="token string">' '</span><span class="token operator">&gt;</span> <span class="token comment">// &quot;Sem Lolo Kaquko&quot;</span>
<span class="token keyword">type</span> <span class="token class-name">NamesStars</span> <span class="token operator">=</span> JoinStrArray<span class="token operator">&lt;</span>Names<span class="token punctuation">,</span> <span class="token string">'⭐️'</span><span class="token operator">&gt;</span> <span class="token comment">// &quot;Sem⭐️Lolo⭐️Kaquko&quot;</span>
</code></pre></div><h2 id="no-10trim"><a href="#no-10trim" class="header-anchor">#</a> No.10	Trim</h2> <blockquote><p>实现一个 <code>Trim</code> 工具类型，用于对字符串字面量类型进行去空格处理。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Trim<span class="token operator">&lt;</span><span class="token constant">V</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token comment">// 测试用例</span>
Trim<span class="token operator">&lt;</span><span class="token string">' semlinker '</span><span class="token operator">&gt;</span>
<span class="token comment">//=&gt; 'semlinker'</span>
</code></pre></div><blockquote><p>提示：可以考虑先定义 TrimLeft 和 TrimRight 工具类型，再组合成 Trim 工具类型。</p></blockquote></blockquote> <h3 id="分析-主要还是利用模板字面量-判断类型是否extends-或-由此可以定义出trimleft和trimright类型-最后再嵌套两者类型实现去除两端的空格"><a href="#分析-主要还是利用模板字面量-判断类型是否extends-或-由此可以定义出trimleft和trimright类型-最后再嵌套两者类型实现去除两端的空格" class="header-anchor">#</a> 分析：主要还是利用模板字面量，判断类型是否extends<code>${}</code>或<code>${}</code>,由此可以定义出TrimLeft和TrimRight类型，最后再嵌套两者类型实现去除两端的空格</h3> <h3 id="方法-10"><a href="#方法-10" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">TrimLeft<span class="token operator">&lt;</span><span class="token constant">V</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">V</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> TrimLeft<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token constant">V</span>
<span class="token keyword">type</span> <span class="token class-name">TrimRight<span class="token operator">&lt;</span><span class="token constant">V</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">V</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> TrimRight<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token constant">V</span>
<span class="token keyword">type</span> <span class="token class-name">Trim<span class="token operator">&lt;</span><span class="token constant">V</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> TrimLeft<span class="token operator">&lt;</span>TrimRight<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token operator">&gt;&gt;</span>
</code></pre></div><h2 id="no-11isequal"><a href="#no-11isequal" class="header-anchor">#</a> No.11	IsEqual</h2> <blockquote><p>实现一个 <code>IsEqual</code> 工具类型，用于比较两个类型是否相等。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">IsEqual<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token comment">// 测试用例</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">E0</span></span> <span class="token operator">=</span> IsEqual<span class="token operator">&lt;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">E1</span></span> <span class="token operator">=</span> IsEqual<span class="token operator">&lt;</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">E2</span></span> <span class="token operator">=</span> IsEqual<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div></blockquote> <h3 id="分析-要使两个类型相等-即两种类型可以互相赋值-a-extends-b-b-extends-a"><a href="#分析-要使两个类型相等-即两种类型可以互相赋值-a-extends-b-b-extends-a" class="header-anchor">#</a> 分析：要使两个类型相等，即两种类型可以互相赋值，A extends B，B extends A</h3> <h3 id="方法-11"><a href="#方法-11" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">IsEqual<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token boolean">false</span>
</code></pre></div><h2 id="no-12takeheadarray"><a href="#no-12takeheadarray" class="header-anchor">#</a> No.12	TakeHeadArray</h2> <blockquote><p>实现一个 <code>Head</code> 工具类型，用于获取数组类型的第一个类型。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Head<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token comment">// 测试用例</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">H0</span></span> <span class="token operator">=</span> Head<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// never</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">H1</span></span> <span class="token operator">=</span> Head<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// 1</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">H2</span></span> <span class="token operator">=</span> Head<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// 3</span>
</code></pre></div></blockquote> <h3 id="分析-1获取数组的第一个类型-容易想到infer-剩余参数-可以很轻松的提取2根据数组第一项的特征-t-extends-0-any-直接返回数组的第一项-t-0"><a href="#分析-1获取数组的第一个类型-容易想到infer-剩余参数-可以很轻松的提取2根据数组第一项的特征-t-extends-0-any-直接返回数组的第一项-t-0" class="header-anchor">#</a> 分析：①获取数组的第一个类型，容易想到infer+剩余参数，可以很轻松的提取②根据数组第一项的特征（<em>T extends {0:any}</em>）直接返回数组的第一项（T[0]）</h3> <h3 id="方法-12"><a href="#方法-12" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 实现一个 Head 工具类型，用于获取数组类型的第一个类型。具体的使用示例如下所示：</span>
<span class="token comment">// type Head&lt;T extends Array&lt;any&gt;&gt; = // 你的实现代码</span>

<span class="token comment">// 测试用例</span>
<span class="token comment">// type H0 = Head&lt;[]&gt; // never</span>
<span class="token comment">// type H1 = Head&lt;[1]&gt; // 1</span>
<span class="token comment">// type H2 = Head&lt;[3, 2]&gt; // 3</span>

<span class="token comment">//answer1</span>
<span class="token comment">// type Head&lt;T extends Array&lt;any&gt;&gt; = T extends {0:any}? T[0] : never</span>
<span class="token comment">//answer2</span>
<span class="token comment">// type Head&lt;T extends Array&lt;any&gt;&gt; = T extends [infer F, ...infer Rest] ? F : never</span>

</code></pre></div><h2 id="no-13taketailarray"><a href="#no-13taketailarray" class="header-anchor">#</a> No.13	TakeTailArray</h2> <blockquote><p>实现一个 <code>Tail</code> 工具类型，用于获取数组类型除了第一个类型外，剩余的类型。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Tail<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;&gt;</span></span> <span class="token operator">=</span>  <span class="token comment">// 你的实现代码</span>

<span class="token comment">// 测试用例</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T0</span></span> <span class="token operator">=</span> Tail<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// []</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> Tail<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// [2]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token operator">=</span> Tail<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// [2, 3, 4, 5]</span>
</code></pre></div></blockquote> <h3 id="分析-思路同上-利用infer-剩余参数对数组进行类型提取"><a href="#分析-思路同上-利用infer-剩余参数对数组进行类型提取" class="header-anchor">#</a> 分析：思路同上，利用infer+剩余参数对数组进行类型提取</h3> <h3 id="方法-13"><a href="#方法-13" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//question</span>
<span class="token comment">// 实现一个 Tail 工具类型，用于获取数组类型除了第一个类型外，剩余的类型。具体的使用示例如下所示：</span>
<span class="token comment">// type Tail&lt;T extends Array&lt;any&gt;&gt; =  // 你的实现代码</span>
<span class="token comment">// 测试用例</span>
<span class="token comment">// type T0 = Tail&lt;[]&gt; // []</span>
<span class="token comment">// type T1 = Tail&lt;[1, 2]&gt; // [2]</span>
<span class="token comment">// type T2 = Tail&lt;[1, 2, 3, 4, 5]&gt; // [2, 3, 4, 5]</span>

<span class="token comment">//answer1</span>
<span class="token comment">// type Tail&lt;T extends Array&lt;any&gt;&gt; = T extends [f: any, ...args: infer l] ? l : []</span>
<span class="token comment">//answer2</span>
<span class="token comment">// type Tail&lt;T extends Array&lt;any&gt;&gt; = T extends [infer A, ...infer B] ? B : [];</span>
</code></pre></div><h2 id="no-14unshiftarray"><a href="#no-14unshiftarray" class="header-anchor">#</a> No.14	UnshiftArray</h2> <blockquote><p>实现一个 <code>Unshift</code> 工具类型，用于把指定类型 <code>E</code> 作为第一个元素添加到 <code>T</code> 数组类型中。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Unshift<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">E</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span>  <span class="token comment">// 你的实现代码</span>

<span class="token comment">// 测试用例</span>
<span class="token keyword">type</span> <span class="token class-name">Arr0</span> <span class="token operator">=</span> Unshift<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// [1]</span>
<span class="token keyword">type</span> <span class="token class-name">Arr1</span> <span class="token operator">=</span> Unshift<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// [0, 1, 2, 3]</span>
</code></pre></div></blockquote> <h3 id="分析-1已知数组第一项的类型直接利用索引签名-对数组第一项进行类型声明-对于剩余项则直接利用扩展运算符展开即可2直接利用元组-扩展运算符-直接将e添加到数组头部"><a href="#分析-1已知数组第一项的类型直接利用索引签名-对数组第一项进行类型声明-对于剩余项则直接利用扩展运算符展开即可2直接利用元组-扩展运算符-直接将e添加到数组头部" class="header-anchor">#</a> 分析：①已知数组第一项的类型直接利用索引签名，对数组第一项进行类型声明，对于剩余项则直接利用扩展运算符展开即可②直接利用元组+扩展运算符，直接将E添加到数组头部</h3> <h3 id="方法-14"><a href="#方法-14" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//question</span>
<span class="token comment">// 实现一个 Unshift 工具类型，用于把指定类型 E 作为第一个元素添加到 T 数组类型中。具体的使用示例如下所示：</span>
<span class="token comment">// type Unshift&lt;T extends any[], E&gt; =  // 你的实现代码</span>
<span class="token comment">// 测试用例</span>
<span class="token comment">// type Arr0 = Unshift&lt;[], 1&gt;; // [1]</span>
<span class="token comment">// type Arr1 = Unshift&lt;[1, 2, 3], 0&gt;; // [0, 1, 2, 3]</span>
<span class="token comment">//answer1</span>
<span class="token comment">// type ParametersArray&lt;T extends any[]&gt; = T extends [...args:infer P]?P:[]</span>
<span class="token comment">// type Unshift&lt;T extends any[], E&gt; = [E,...ParametersArray&lt;T&gt;]</span>
<span class="token comment">//answer2</span>
<span class="token comment">// type Unshift&lt;T extends any[], E&gt; =  [E, ...T];</span>

</code></pre></div><h2 id="no-15shiftarray"><a href="#no-15shiftarray" class="header-anchor">#</a> No.15	ShiftArray</h2> <blockquote><p>实现一个 <code>Shift</code> 工具类型，用于移除 <code>T</code> 数组类型中的第一个类型。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Shift<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token comment">// 测试用例</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S0</span></span> <span class="token operator">=</span> Shift<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// [2, 3]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S1</span></span> <span class="token operator">=</span> Shift<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span><span class="token builtin">number</span><span class="token punctuation">,</span><span class="token builtin">boolean</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// [number,boolean]</span>
</code></pre></div></blockquote> <h3 id="分析-确定了数组某一项的类型-直接利用infer进行类型提取-加之条件类型-直接返回数组的尾部的类型"><a href="#分析-确定了数组某一项的类型-直接利用infer进行类型提取-加之条件类型-直接返回数组的尾部的类型" class="header-anchor">#</a> 分析：确定了数组某一项的类型，直接利用infer进行类型提取，加之条件类型，直接返回数组的尾部的类型</h3> <h3 id="方法-15"><a href="#方法-15" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//question</span>
<span class="token comment">// 实现一个 Shift 工具类型，用于移除 T 数组类型中的第一个类型。具体的使用示例如下所示：</span>
<span class="token comment">// type Shift&lt;T extends any[]&gt; = // 你的实现代码</span>
<span class="token comment">// 测试用例</span>
<span class="token comment">// type S0 = Shift&lt;[1, 2, 3]&gt; // [2, 3]</span>
<span class="token comment">// type S1 = Shift&lt;[string,number,boolean]&gt; // [number,boolean]</span>

<span class="token comment">//answer</span>
<span class="token comment">// type Shift&lt;T extends any[]&gt; = T extends [any, ...infer B] ? B : never</span>

</code></pre></div><h2 id="no-16pusharray"><a href="#no-16pusharray" class="header-anchor">#</a> No.16	PushArray</h2> <blockquote><p>实现一个 <code>Push</code> 工具类型，用于把指定类型 <code>E</code> 作为最后一个元素添加到 <code>T</code> 数组类型中。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Push<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">V</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token comment">// 测试用例</span>
<span class="token keyword">type</span> <span class="token class-name">Arr0</span> <span class="token operator">=</span> Push<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">&gt;</span> <span class="token comment">// [1]</span>
<span class="token keyword">type</span> <span class="token class-name">Arr1</span> <span class="token operator">=</span> Push<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token operator">&gt;</span> <span class="token comment">// [1, 2, 3, 4]</span>
</code></pre></div></blockquote> <h3 id="分析-确定了数组某一项的类型-向数组尾部添加类型-利用元组-扩展运算符-对数组的类型进行类型声明"><a href="#分析-确定了数组某一项的类型-向数组尾部添加类型-利用元组-扩展运算符-对数组的类型进行类型声明" class="header-anchor">#</a> 分析：确定了数组某一项的类型，向数组尾部添加类型，利用元组+扩展运算符，对数组的类型进行类型声明</h3> <h3 id="方法-16"><a href="#方法-16" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//question</span>
<span class="token comment">// 实现一个 Push 工具类型，用于把指定类型 E 作为最后一个元素添加到 T 数组类型中。具体的使用示例如下所示：</span>
<span class="token comment">// type Push&lt;T extends any[], V&gt; = // 你的实现代码</span>
<span class="token comment">// 测试用例</span>
<span class="token comment">// type Arr0 = Push&lt;[], 1&gt; // [1]</span>
<span class="token comment">// type Arr1 = Push&lt;[1, 2, 3], 4&gt; // [1, 2, 3, 4]</span>

<span class="token comment">//answer</span>
<span class="token comment">// type Push&lt;T extends any[], V&gt; = [...T, V]</span>

</code></pre></div><h2 id="no-17includes"><a href="#no-17includes" class="header-anchor">#</a> No.17	Includes</h2> <blockquote><p>实现一个 <code>Includes</code> 工具类型，用于判断指定的类型 <code>E</code> 是否包含在 <code>T</code> 数组类型中。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Includes<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token constant">E</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I0</span></span> <span class="token operator">=</span> Includes<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I1</span></span> <span class="token operator">=</span> Includes<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I2</span></span> <span class="token operator">=</span> Includes<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
</code></pre></div></blockquote> <h3 id="分析-1利用infer-递归-对数组的每一次的第一项进行类型提取-再与e进行比较2直接利用t-number-遍历数组每一项的类型-再与e进行比较"><a href="#分析-1利用infer-递归-对数组的每一次的第一项进行类型提取-再与e进行比较2直接利用t-number-遍历数组每一项的类型-再与e进行比较" class="header-anchor">#</a> 分析：①利用infer+递归，对数组的每一次的第一项进行类型提取，再与E进行比较②直接利用T[number]遍历数组每一项的类型，再与E进行比较</h3> <h3 id="方法-17"><a href="#方法-17" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//question</span>
<span class="token comment">// 实现一个 Includes 工具类型，用于判断指定的类型 E 是否包含在 T 数组类型中。具体的使用示例如下所示：</span>
<span class="token comment">// type Includes&lt;T extends Array&lt;any&gt;, E&gt; = // 你的实现代码</span>
<span class="token comment">// type I0 = Includes&lt;[], 1&gt; // false</span>
<span class="token comment">// type I1 = Includes&lt;[2, 2, 3, 1], 2&gt; // true</span>
<span class="token comment">// type I2 = Includes&lt;[2, 3, 3, 1], 1&gt; // true</span>

<span class="token comment">//answer1</span>
<span class="token comment">// type Includes&lt;T extends Array&lt;any&gt;, E&gt; = T extends [infer F,...infer Rest]?F extends E?true:Includes&lt;Rest,E&gt;:false</span>
<span class="token comment">//answer2</span>
<span class="token comment">// type Includes&lt;T extends Array&lt;any&gt;, E&gt; = E extends T[number] ? true : false;</span>

</code></pre></div><h2 id="no-18uniontointersection"><a href="#no-18uniontointersection" class="header-anchor">#</a> No.18	UnionToIntersection</h2> <blockquote><p>实现一个 <code>UnionToIntersection</code> 工具类型，用于把联合类型转换为交叉类型。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">UnionToIntersection<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token comment">// 测试用例</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">U0</span></span> <span class="token operator">=</span> UnionToIntersection<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token comment">// never</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">U1</span></span> <span class="token operator">=</span> UnionToIntersection<span class="token operator">&lt;</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token comment">// { name: string; } &amp; { age: number; }</span>
</code></pre></div></blockquote> <h3 id="分析-联合转交叉-联合类型必定extends交叉类型-如果没有那就返回never-如果只是普通的条件类型推断-那么infer的那个类型就是联合类型本身-但如果在函数的形参中-a要想extendsb-b必须包含a所有的类型"><a href="#分析-联合转交叉-联合类型必定extends交叉类型-如果没有那就返回never-如果只是普通的条件类型推断-那么infer的那个类型就是联合类型本身-但如果在函数的形参中-a要想extendsb-b必须包含a所有的类型" class="header-anchor">#</a> 分析：联合转交叉，联合类型必定extends交叉类型，如果没有那就返回never，如果只是普通的条件类型推断，那么infer的那个类型就是联合类型本身，但如果在函数的形参中，A要想extendsB，B必须包含A所有的类型</h3> <h3 id="方法-18"><a href="#方法-18" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//question</span>
<span class="token comment">// 实现一个 UnionToIntersection 工具类型，用于把联合类型转换为交叉类型。具体的使用示例如下所示：</span>
<span class="token comment">// type UnionToIntersection&lt;U&gt; = // 你的实现代码</span>
<span class="token comment">// 测试用例</span>
<span class="token comment">// type U0 = UnionToIntersection&lt;string | number&gt; // never</span>
<span class="token comment">// type U1 = UnionToIntersection&lt;{ name: string } | { age: number }&gt; // { name: string; } &amp; { age: number; }</span>

<span class="token comment">//answer</span>
<span class="token comment">// type UnionToIntersection&lt;U&gt; = (U extends any ? (k: U) =&gt; void : never) extends (k: infer I) =&gt; void ? I : never</span>
<span class="token keyword">type</span> <span class="token class-name">UnionToIntersection<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span> <span class="token operator">?</span> <span class="token punctuation">(</span>k<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span>k<span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">I</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token operator">?</span> <span class="token constant">I</span> <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">U0</span></span> <span class="token operator">=</span> UnionToIntersection<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token operator">&gt;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">U1</span></span> <span class="token operator">=</span> UnionToIntersection<span class="token operator">&lt;</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span>

</code></pre></div><h2 id="no-19takeoptionalkeys"><a href="#no-19takeoptionalkeys" class="header-anchor">#</a> No.19	TakeOptionalKeys</h2> <blockquote><p>实现一个 <code>OptionalKeys</code> 工具类型，用来获取对象类型中声明的可选属性。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  from<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  speak<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">OptionalKeys<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>
<span class="token keyword">type</span> <span class="token class-name">PersonOptionalKeys</span> <span class="token operator">=</span> OptionalKeys<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span> <span class="token comment">// &quot;from&quot; | &quot;speak&quot;</span>
</code></pre></div></blockquote> <h3 id="分析-1对于可选属性来说-类型必定包含undefined-所以直接遍历传入的类型-对每一项的类型进行判断2利用isequal类-判断原始的属性的类型和全部为可选的属性的类型是否相同-如果相同则那个属性就是可选属性"><a href="#分析-1对于可选属性来说-类型必定包含undefined-所以直接遍历传入的类型-对每一项的类型进行判断2利用isequal类-判断原始的属性的类型和全部为可选的属性的类型是否相同-如果相同则那个属性就是可选属性" class="header-anchor">#</a> 分析：①对于可选属性来说，类型必定包含undefined，所以直接遍历传入的类型，对每一项的类型进行判断②利用isEqual类，判断原始的属性的类型和全部为可选的属性的类型是否相同，如果相同则那个属性就是可选属性</h3> <h3 id="方法-19"><a href="#方法-19" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//question</span>
<span class="token comment">// 实现一个 OptionalKeys 工具类型，用来获取对象类型中声明的可选属性。具体的使用示例如下所示：</span>
<span class="token comment">// type Person = {</span>
<span class="token comment">//   id: string;</span>
<span class="token comment">//   name: string;</span>
<span class="token comment">//   age: number;</span>
<span class="token comment">//   from?: string;</span>
<span class="token comment">//   speak?: string;</span>
<span class="token comment">// };</span>
<span class="token comment">// type OptionalKeys&lt;T&gt; = // 你的实现代码</span>
<span class="token comment">// type PersonOptionalKeys = OptionalKeys&lt;Person&gt; // &quot;from&quot; | &quot;speak&quot;</span>

<span class="token comment">//answer1</span>
<span class="token comment">// type OptionalKeys&lt;T&gt; = NonNullable&lt;</span>
<span class="token comment">//   {</span>
<span class="token comment">//     [P in keyof T]: undefined extends T[P] ? P : never</span>
<span class="token comment">//   }[keyof T]</span>
<span class="token comment">// &gt;</span>
<span class="token comment">//answer2</span>
<span class="token comment">// type IsEqual&lt;T, U&gt; = [T] extends [U] ? [U] extends [T] ? true : false : false;</span>
<span class="token comment">// type OptionalKeys&lt;T&gt; = NonNullable&lt;{</span>
<span class="token comment">//   [k in keyof T]: IsEqual&lt;Pick&lt;T, k&gt;, Partial&lt;Pick&lt;T, k&gt;&gt;&gt; extends true ? k : never;</span>
<span class="token comment">// }[keyof T]&gt;</span>
<span class="token comment">// type Person = {</span>
<span class="token comment">//   id: string</span>
<span class="token comment">//   name: string</span>
<span class="token comment">//   age: number</span>
<span class="token comment">//   from?: string</span>
<span class="token comment">//   speak?: string</span>
<span class="token comment">// }</span>
<span class="token comment">// type PersonOptionalKeys = OptionalKeys&lt;Person&gt;</span>

</code></pre></div><h2 id="no-20curry"><a href="#no-20curry" class="header-anchor">#</a> No.20	Curry</h2> <blockquote><p>实现一个 <code>Curry</code> 工具类型，用来实现函数类型的柯里化处理。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Curry<span class="token operator">&lt;</span>
  <span class="token constant">F</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span> <span class="token builtin">any</span><span class="token punctuation">,</span>
  <span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> Parameters<span class="token operator">&lt;</span><span class="token constant">F</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> 
  <span class="token constant">R</span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token constant">F</span><span class="token operator">&gt;</span> 
<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F0</span></span> <span class="token operator">=</span> Curry<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Date<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// () =&gt; Date</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F1</span></span> <span class="token operator">=</span> Curry<span class="token operator">&lt;</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Date<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// (arg: number) =&gt; Date</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F2</span></span> <span class="token operator">=</span> Curry<span class="token operator">&lt;</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Date<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">//  (arg_0: number) =&gt; (b: string) =&gt; Date</span>
</code></pre></div></blockquote> <h3 id="分析-柯里化-将多变量函数拆解为单变量-或部分变量-的多个函数并依次调用-主要还是利用infer-剩余参数提取形参列表的第一项类型和后面的类型-提取完成后-还需判断尾部形参列表的长度-如果不为0-则将尾部的形参列表作为下一次递归的类型参数"><a href="#分析-柯里化-将多变量函数拆解为单变量-或部分变量-的多个函数并依次调用-主要还是利用infer-剩余参数提取形参列表的第一项类型和后面的类型-提取完成后-还需判断尾部形参列表的长度-如果不为0-则将尾部的形参列表作为下一次递归的类型参数" class="header-anchor">#</a> 分析：柯里化（将多变量函数拆解为单变量（或部分变量）的多个函数并依次调用），主要还是利用infer+剩余参数提取形参列表的第一项类型和后面的类型，提取完成后，还需判断尾部形参列表的长度，如果不为0，则将尾部的形参列表作为下一次递归的类型参数</h3> <h3 id="方法-20"><a href="#方法-20" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//question</span>
<span class="token comment">// 实现一个 Curry 工具类型，用来实现函数类型的柯里化处理。具体的使用示例如下所示：</span>
<span class="token comment">// type Curry&lt;</span>
<span class="token comment">//   F extends (...args: any[]) =&gt; any,</span>
<span class="token comment">//   P extends any[] = Parameters&lt;F&gt;,</span>
<span class="token comment">//   R = ReturnType&lt;F&gt;</span>
<span class="token comment">// &gt; = // 你的实现代码</span>
<span class="token comment">// type F0 = Curry&lt;() =&gt; Date&gt;; // () =&gt; Date</span>
<span class="token comment">// type F1 = Curry&lt;(a: number) =&gt; Date&gt;; // (arg: number) =&gt; Date</span>
<span class="token comment">// type F2 = Curry&lt;(a: number, b: string) =&gt; Date&gt;; //  (arg_0: number) =&gt; (b: string) =&gt; Date</span>

<span class="token comment">//answer</span>
<span class="token comment">// type Curry&lt;F extends (...args: any[]) =&gt; any, P extends any[] = Parameters&lt;F&gt;, R = ReturnType&lt;F&gt;&gt; = P extends [infer A, ...infer B] ? (B['length'] extends 0 ? F : (arg: A) =&gt; Curry&lt;(...args: B) =&gt; R&gt;) : F</span>
<span class="token comment">// type F0 = Curry&lt;() =&gt; Date&gt; // () =&gt; Date</span>
<span class="token comment">// type F1 = Curry&lt;(a: number) =&gt; Date&gt; // (arg: number) =&gt; Date</span>
<span class="token comment">// type F2 = Curry&lt;(a: number, b: string) =&gt; Date&gt; //  (arg_0: number) =&gt; (b: string) =&gt; Date</span>

</code></pre></div><h2 id="no-21merge"><a href="#no-21merge" class="header-anchor">#</a> No.21	Merge</h2> <blockquote><p>实现一个 <code>Merge</code> 工具类型，用于把两个类型合并成一个新的类型。第二种类型（SecondType）的 <code>Keys</code> 将会覆盖第一种类型（FirstType）的 <code>Keys</code>。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Foo</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
	a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
	b<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">Bar</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
	b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">Merge<span class="token operator">&lt;</span>FirstType<span class="token punctuation">,</span> SecondType<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">const</span> ab<span class="token operator">:</span> Merge<span class="token operator">&lt;</span>Foo<span class="token punctuation">,</span> Bar<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <h3 id="分析-始终保持secondtype的优先级-所以先将firsttype中的secondtype的属性先排除掉-最后再将两种类型交叉"><a href="#分析-始终保持secondtype的优先级-所以先将firsttype中的secondtype的属性先排除掉-最后再将两种类型交叉" class="header-anchor">#</a> 分析：始终保持SecondType的优先级，所以先将FirstType中的SecondType的属性先排除掉，最后再将两种类型交叉</h3> <h3 id="方法-21"><a href="#方法-21" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//question</span>
<span class="token comment">// 实现一个 Merge 工具类型，用于把两个类型合并成一个新的类型。第二种类型（SecondType）的 Keys 将会覆盖第一种类型（FirstType）的 Keys。具体的使用示例如下所示：</span>
<span class="token comment">// type Foo = {</span>
<span class="token comment">// 	a: number;</span>
<span class="token comment">// 	b: string;</span>
<span class="token comment">// };</span>
<span class="token comment">// type Bar = {</span>
<span class="token comment">// 	b: number;</span>
<span class="token comment">// };</span>
<span class="token comment">// type Merge&lt;FirstType, SecondType&gt; = // 你的实现代码</span>
<span class="token comment">// const ab: Merge&lt;Foo, Bar&gt; = { a: 1, b: 2 };</span>

<span class="token comment">//answer1</span>
<span class="token comment">// type Merge&lt;FirstType, SecondType&gt; = {</span>
<span class="token comment">//   [K in keyof (FirstType &amp; SecondType)]: K extends keyof SecondType ? SecondType[K] : K extends keyof FirstType ? FirstType[K] : never</span>
<span class="token comment">// }</span>
<span class="token comment">//answer2😍</span>
<span class="token comment">// type Merge &lt;FirstType, SecondType&gt; = Omit&lt;FirstType, keyof SecondType&gt; &amp; SecondType;</span>
<span class="token comment">// type Foo = {</span>
<span class="token comment">//   a: number</span>
<span class="token comment">//   b: string</span>
<span class="token comment">// }</span>
<span class="token comment">// type Bar = {</span>
<span class="token comment">//   b: number</span>
<span class="token comment">// }</span>
<span class="token comment">// const ab: Merge&lt;Foo, Bar&gt; = { a: 1, b: 2 }</span>

</code></pre></div><h2 id="no-22requireatleastone"><a href="#no-22requireatleastone" class="header-anchor">#</a> No.22	RequireAtLeastOne</h2> <blockquote><p>实现一个 <code>RequireAtLeastOne</code> 工具类型，它将创建至少含有一个给定 <code>Keys</code> 的类型，其余的 <code>Keys</code> 保持原样。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Responder</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
	text<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
	json<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
	secure<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">RequireAtLeastOne<span class="token operator">&lt;</span>
	ObjectType<span class="token punctuation">,</span>
	KeysType <span class="token keyword">extends</span> <span class="token keyword">keyof</span> ObjectType <span class="token operator">=</span> <span class="token keyword">keyof</span> ObjectType<span class="token punctuation">,</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token comment">// 表示当前类型至少包含 'text' 或 'json' 键</span>
<span class="token keyword">const</span> responder<span class="token operator">:</span> RequireAtLeastOne<span class="token operator">&lt;</span>Responder<span class="token punctuation">,</span> <span class="token string">'text'</span> <span class="token operator">|</span> <span class="token string">'json'</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">json</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">'{&quot;message&quot;: &quot;ok&quot;}'</span><span class="token punctuation">,</span>
	secure<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <h3 id="分析-利用了联合类型作为泛型是-extends-会分发处理的特性-将objecttype中的keystype类型分别变为必选参数-最后再联合"><a href="#分析-利用了联合类型作为泛型是-extends-会分发处理的特性-将objecttype中的keystype类型分别变为必选参数-最后再联合" class="header-anchor">#</a> 分析：利用了联合类型作为泛型是 extends 会分发处理的特性，将ObjectType中的KeysType类型分别变为必选参数，最后再联合</h3> <h3 id="方法-22"><a href="#方法-22" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//question</span>
<span class="token comment">// 实现一个 RequireAtLeastOne 工具类型，它将创建至少含有一个给定 Keys 的类型，其余的 Keys 保持原样。具体的使用示例如下所示：</span>
<span class="token comment">// type Responder = {</span>
<span class="token comment">// 	text?: () =&gt; string;</span>
<span class="token comment">// 	json?: () =&gt; string;</span>
<span class="token comment">// 	secure?: boolean;</span>
<span class="token comment">// };</span>
<span class="token comment">// type RequireAtLeastOne&lt;</span>
<span class="token comment">// 	ObjectType,</span>
<span class="token comment">// 	KeysType extends keyof ObjectType = keyof ObjectType,</span>
<span class="token comment">// &gt; = // 你的实现代码</span>
<span class="token comment">// 表示当前类型至少包含 'text' 或 'json' 键</span>
<span class="token comment">// const responder: RequireAtLeastOne&lt;Responder, 'text' | 'json'&gt; = {</span>
<span class="token comment">// 	json: () =&gt; '{&quot;message&quot;: &quot;ok&quot;}',</span>
<span class="token comment">// 	secure: true</span>
<span class="token comment">// };</span>

<span class="token comment">//answer</span>
<span class="token keyword">type</span> <span class="token class-name">RequireAtLeastOne<span class="token operator">&lt;</span>ObjectType<span class="token punctuation">,</span> KeysType <span class="token keyword">extends</span> <span class="token keyword">keyof</span> ObjectType <span class="token operator">=</span> <span class="token keyword">keyof</span> ObjectType<span class="token operator">&gt;</span></span> <span class="token operator">=</span> KeysType <span class="token keyword">extends</span> <span class="token keyword">keyof</span> ObjectType <span class="token operator">?</span> ObjectType <span class="token operator">&amp;</span> Required<span class="token operator">&lt;</span>Pick<span class="token operator">&lt;</span>ObjectType<span class="token punctuation">,</span> KeysType<span class="token operator">&gt;&gt;</span> <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token keyword">type</span> <span class="token class-name">Responder</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  text<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span>
  json<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span>
  secure<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">a</span> <span class="token operator">=</span> RequireAtLeastOne<span class="token operator">&lt;</span>Responder<span class="token punctuation">,</span> <span class="token string">'text'</span> <span class="token operator">|</span> <span class="token string">'json'</span><span class="token operator">&gt;</span>
<span class="token keyword">const</span> responder<span class="token operator">:</span> RequireAtLeastOne<span class="token operator">&lt;</span>Responder<span class="token punctuation">,</span> <span class="token string">'text'</span> <span class="token operator">|</span> <span class="token string">'json'</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">json</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">'{&quot;message&quot;: &quot;ok&quot;}'</span><span class="token punctuation">,</span>
  secure<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="no-23removeindexsignature"><a href="#no-23removeindexsignature" class="header-anchor">#</a> No.23	RemoveIndexSignature</h2> <blockquote><p>实现一个 <code>RemoveIndexSignature</code> 工具类型，用于移除已有类型中的索引签名。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
  <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
  <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">RemoveIndexSignature<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name">FooWithOnlyBar</span> <span class="token operator">=</span> RemoveIndexSignature<span class="token operator">&lt;</span>Foo<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">//{ bar: () =&gt; void; }</span>
</code></pre></div></blockquote> <h3 id="分析-移除索引签名-即将对应的索引签名变为never即可-普通类型的属性为string-number-symbol-排除对应的类型即可"><a href="#分析-移除索引签名-即将对应的索引签名变为never即可-普通类型的属性为string-number-symbol-排除对应的类型即可" class="header-anchor">#</a> 分析：移除索引签名，即将对应的索引签名变为never即可，普通类型的属性为string|number|symbol，排除对应的类型即可</h3> <h3 id="方法-23"><a href="#方法-23" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//question</span>
<span class="token comment">// 实现一个 RemoveIndexSignature 工具类型，用于移除已有类型中的索引签名。具体的使用示例如下所示：</span>
<span class="token comment">// interface Foo {</span>
<span class="token comment">//   [key: string]: any;</span>
<span class="token comment">//   [key: number]: any;</span>
<span class="token comment">//   bar(): void;</span>
<span class="token comment">// }</span>
<span class="token comment">// type RemoveIndexSignature&lt;T&gt; = // 你的实现代码</span>
<span class="token comment">// type FooWithOnlyBar = RemoveIndexSignature&lt;Foo&gt;; //{ bar: () =&gt; void; }</span>

<span class="token comment">//answer1</span>
<span class="token comment">// type RemoveIndexSignature&lt;T&gt; = {</span>
<span class="token comment">//   [K in keyof T as string extends K ? never : number extends K ? never : symbol extends K ? never : K]: T[K]</span>
<span class="token comment">// }</span>
<span class="token comment">//answer2</span>
<span class="token keyword">type</span> <span class="token class-name">RemoveIndexSignature<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>k <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token keyword">as</span> <span class="token builtin">string</span> <span class="token keyword">extends</span> <span class="token class-name">k</span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token builtin">number</span> <span class="token keyword">extends</span> <span class="token class-name">k</span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token builtin">symbol</span> <span class="token keyword">extends</span> <span class="token class-name">k</span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> k<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span>
  <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span>
  <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token builtin">any</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">FooWithOnlyBar</span> <span class="token operator">=</span> RemoveIndexSignature<span class="token operator">&lt;</span>Foo<span class="token operator">&gt;</span>

</code></pre></div><h2 id="no-24mutable"><a href="#no-24mutable" class="header-anchor">#</a> No.24	Mutable</h2> <blockquote><p>实现一个 <code>Mutable</code> 工具类型，用于移除对象类型上所有属性或部分属性的 <code>readonly</code> 修饰符。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Foo</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> b<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> c<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">Mutable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> Keys <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">const</span> mutableFoo<span class="token operator">:</span> Mutable<span class="token operator">&lt;</span>Foo<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span> c<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

mutableFoo<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
mutableFoo<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token string">'6'</span><span class="token punctuation">;</span> <span class="token comment">// Cannot assign to 'b' because it is a read-only property.</span>
</code></pre></div></blockquote> <h3 id="分析-总体思路为将需要去除readonly的那个属性挑出来去除readonly后-再与原来的对象交叉"><a href="#分析-总体思路为将需要去除readonly的那个属性挑出来去除readonly后-再与原来的对象交叉" class="header-anchor">#</a> 分析：总体思路为将需要去除readonly的那个属性挑出来去除readonly后，再与原来的对象交叉</h3> <h3 id="方法-24"><a href="#方法-24" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//question</span>
<span class="token comment">// 实现一个 Mutable 工具类型，用于移除对象类型上所有属性或部分属性的 readonly 修饰符。具体的使用示例如下所示：</span>
<span class="token comment">// type Foo = {</span>
<span class="token comment">//   readonly a: number;</span>
<span class="token comment">//   readonly b: string;</span>
<span class="token comment">//   readonly c: boolean;</span>
<span class="token comment">// };</span>
<span class="token comment">// type Mutable&lt;T, Keys extends keyof T = keyof T&gt; = // 你的实现代码</span>
<span class="token comment">// const mutableFoo: Mutable&lt;Foo, 'a'&gt; = { a: 1, b: '2', c: true };</span>
<span class="token comment">// mutableFoo.a = 3; // OK</span>
<span class="token comment">// mutableFoo.b = '6'; // Cannot assign to 'b' because it is a read-only property.</span>

<span class="token comment">//answer1</span>
<span class="token comment">// type Simplify&lt;T&gt; = {</span>
<span class="token comment">//   [K in keyof T]: T[K]</span>
<span class="token comment">// }</span>
<span class="token comment">// type Mutable&lt;T, Keys extends keyof T = keyof T&gt; = Simplify&lt;</span>
<span class="token comment">//   {</span>
<span class="token comment">//     -readonly [K in Keys]: T[K]</span>
<span class="token comment">//   } &amp; Omit&lt;T, Keys&gt;</span>
<span class="token comment">// &gt;</span>
<span class="token comment">//answer2</span>
<span class="token comment">// type Mutable&lt;T, Keys extends keyof T = keyof T&gt; = {</span>
<span class="token comment">//   [J in keyof T]: T[J]</span>
<span class="token comment">// } &amp; {</span>
<span class="token comment">//   -readonly [K in Keys]: T[K]</span>
<span class="token comment">// }</span>

<span class="token comment">// type Foo1 = {</span>
<span class="token comment">//   readonly a: number</span>
<span class="token comment">//   readonly b: string</span>
<span class="token comment">//   readonly c: boolean</span>
<span class="token comment">// }</span>
<span class="token comment">// const mutableFoo: Mutable&lt;Foo1, 'a'&gt; = { a: 1, b: '2', c: true }</span>
<span class="token comment">// mutableFoo.a = 3 // OK</span>
<span class="token comment">// mutableFoo.b = '6' // Cannot assign to 'b' because it is a read-only property.</span>

</code></pre></div><h2 id="no-25isunion"><a href="#no-25isunion" class="header-anchor">#</a> No.25	IsUnion</h2> <blockquote><p>实现一个 <code>IsUnion</code> 工具类型，判断指定的类型是否为联合类型。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">IsUnion<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token operator">=</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I0</span></span> <span class="token operator">=</span> IsUnion<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">|</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I1</span></span> <span class="token operator">=</span> IsUnion<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">|</span><span class="token builtin">never</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I2</span></span> <span class="token operator">=</span>IsUnion<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">|</span><span class="token builtin">unknown</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
</code></pre></div></blockquote> <h3 id="分析-1如果是联合类型-那么他们的交叉类型必为never-如果不是-则就不是never2利用条件类型对于非裸类型不会被分解为多个分支的特性-为比较的类型用-装饰-如果是联合类型的话-u-extends-t-一定为否"><a href="#分析-1如果是联合类型-那么他们的交叉类型必为never-如果不是-则就不是never2利用条件类型对于非裸类型不会被分解为多个分支的特性-为比较的类型用-装饰-如果是联合类型的话-u-extends-t-一定为否" class="header-anchor">#</a> 分析：①如果是联合类型，那么他们的交叉类型必为never，如果不是，则就不是never②利用条件类型对于非裸类型不会被分解为多个分支的特性，为比较的类型用[]装饰，如果是联合类型的话 [U] extends [T] 一定为否</h3> <h3 id="方法-25"><a href="#方法-25" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//question</span>
<span class="token comment">// 实现一个 IsUnion 工具类型，判断指定的类型是否为联合类型。具体的使用示例如下所示：</span>
<span class="token comment">// type IsUnion&lt;T, U = T&gt; = // 你的实现代码</span>
<span class="token comment">// type I0 = IsUnion&lt;string|number&gt; // true</span>
<span class="token comment">// type I1 = IsUnion&lt;string|never&gt; // false</span>
<span class="token comment">// type I2 =IsUnion&lt;string|unknown&gt; // false</span>

<span class="token comment">//answer1</span>
<span class="token comment">// type UnionToIntersection1&lt;U&gt; = (U extends any ? (k: U) =&gt; void : never) extends (k: infer I) =&gt; void ? I : never</span>
<span class="token comment">// type IsUnion&lt;T, U = T&gt; = U extends UnionToIntersection1&lt;T&gt; ? false : true</span>
<span class="token comment">//answer2</span>
<span class="token keyword">type</span> <span class="token class-name">IsUnion<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token operator">=</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span> <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">U</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I0</span></span> <span class="token operator">=</span> IsUnion<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I1</span></span> <span class="token operator">=</span> IsUnion<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">never</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I2</span></span> <span class="token operator">=</span> IsUnion<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">unknown</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name">b</span> <span class="token operator">=</span> IsUnion<span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token operator">&gt;</span>

</code></pre></div><h2 id="no-26isnever"><a href="#no-26isnever" class="header-anchor">#</a> No.26	IsNever</h2> <blockquote><p>实现一个 <code>IsNever</code> 工具类型，判断指定的类型是否为 <code>never</code> 类型。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I0</span></span> <span class="token operator">=</span> IsNever<span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I1</span></span> <span class="token operator">=</span> IsNever<span class="token operator">&lt;</span><span class="token builtin">never</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I2</span></span> <span class="token operator">=</span> IsNever<span class="token operator">&lt;</span><span class="token keyword">null</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
</code></pre></div></blockquote> <h3 id="分析-never-是一个联合类型-因此要通过-t-将其变成普通类型-再去-extends"><a href="#分析-never-是一个联合类型-因此要通过-t-将其变成普通类型-再去-extends" class="header-anchor">#</a> 分析：never 是一个联合类型，因此要通过 [T] 将其变成普通类型，再去 extends</h3> <h3 id="方法-26"><a href="#方法-26" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//question</span>
<span class="token comment">// 实现一个 IsNever 工具类型，判断指定的类型是否为 never 类型。具体的使用示例如下所示：</span>
<span class="token comment">// type I0 = IsNever&lt;never&gt; // true</span>
<span class="token comment">// type I1 = IsNever&lt;never | string&gt; // false</span>
<span class="token comment">// type I2 = IsNever&lt;null&gt; // false</span>

<span class="token comment">//answer</span>
<span class="token keyword">type</span> <span class="token class-name">IsNever<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">never</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I3</span></span> <span class="token operator">=</span> IsNever<span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I4</span></span> <span class="token operator">=</span> IsNever<span class="token operator">&lt;</span><span class="token builtin">never</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I5</span></span> <span class="token operator">=</span> IsNever<span class="token operator">&lt;</span><span class="token keyword">null</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>

</code></pre></div><h2 id="no-27reverse"><a href="#no-27reverse" class="header-anchor">#</a> No.27	Reverse</h2> <blockquote><p>实现一个 <code>Reverse</code> 工具类型，用于对元组类型中元素的位置颠倒，并返回该数组。元组的第一个元素会变成最后一个，最后一个元素变成第一个。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Reverse<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token constant">R</span> <span class="token keyword">extends</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">R0</span></span> <span class="token operator">=</span> Reverse<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// []</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">R1</span></span> <span class="token operator">=</span> Reverse<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// [3, 2, 1]</span>
</code></pre></div></blockquote> <h3 id="分析-每次取出数组的第一个元素作为下一次递归的最后一项-再将剩余的数组作为下一次递归-的前一项"><a href="#分析-每次取出数组的第一个元素作为下一次递归的最后一项-再将剩余的数组作为下一次递归-的前一项" class="header-anchor">#</a> 分析：每次取出数组的第一个元素作为下一次递归的最后一项，再将剩余的数组作为下一次递归 的前一项</h3> <h3 id="方法-27"><a href="#方法-27" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//question</span>
<span class="token comment">// 实现一个 Reverse 工具类型，用于对元组类型中元素的位置颠倒，并返回该数组。元组的第一个元素会变成最后一个，最后一个元素变成第一个。</span>
<span class="token comment">// type Reverse&lt;</span>
<span class="token comment">//   T extends Array&lt;any&gt;,</span>
<span class="token comment">//   R extends Array&lt;any&gt; = []</span>
<span class="token comment">// &gt; = // 你的实现代码</span>
<span class="token comment">// type R0 = Reverse&lt;[]&gt; // []</span>
<span class="token comment">// type R1 = Reverse&lt;[1, 2, 3]&gt; // [3, 2, 1]</span>

<span class="token comment">//answer</span>
<span class="token keyword">type</span> <span class="token class-name">Reverse<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> First<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> Rest<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token operator">...</span>Reverse<span class="token operator">&lt;</span>Rest<span class="token operator">&gt;</span><span class="token punctuation">,</span> First<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">R1</span></span> <span class="token operator">=</span> Reverse<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>

</code></pre></div><h2 id="no-28split"><a href="#no-28split" class="header-anchor">#</a> No.28	Split</h2> <blockquote><p>实现一个 <code>Split</code> 工具类型，根据给定的分隔符（Delimiter）对包含分隔符的字符串进行切割。可用于定义 <code>String.prototype.split</code> 方法的返回值类型。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Item</span> <span class="token operator">=</span> <span class="token string">'semlinker,lolo,kakuqo'</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">Split<span class="token operator">&lt;</span>
	<span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> 
	Delimiter <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name">ElementType</span> <span class="token operator">=</span> Split<span class="token operator">&lt;</span>Item<span class="token punctuation">,</span> <span class="token string">','</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;semlinker&quot;, &quot;lolo&quot;, &quot;kakuqo&quot;]</span>
</code></pre></div></blockquote> <h3 id="分析-从结构上出发-对字符串的第一项进行依次提取类型-结构大致为-infer-f-delimiter-infer-r-然后就是依次递归"><a href="#分析-从结构上出发-对字符串的第一项进行依次提取类型-结构大致为-infer-f-delimiter-infer-r-然后就是依次递归" class="header-anchor">#</a> 分析：从结构上出发，对字符串的第一项进行依次提取类型，结构大致为<code>${infer F}${Delimiter}${infer R}</code>，然后就是依次递归</h3> <h3 id="方法-28"><a href="#方法-28" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 实现一个 Split 工具类型，根据给定的分隔符（Delimiter）对包含分隔符的字符串进行切割。可用于定义 String.prototype.split 方法的返回值类型。具体的使用示例如下所示：</span>
<span class="token comment">// type Item = 'semlinker,lolo,kakuqo';</span>
<span class="token comment">// type Split&lt;</span>
<span class="token comment">// 	S extends string,</span>
<span class="token comment">// 	Delimiter extends string,</span>
<span class="token comment">// &gt; = // 你的实现代码</span>
<span class="token comment">// type ElementType = Split&lt;Item, ','&gt;; // [&quot;semlinker&quot;, &quot;lolo&quot;, &quot;kakuqo&quot;]</span>

<span class="token comment">//answer</span>
<span class="token keyword">type</span> <span class="token class-name">Split<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> Delimiter <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">T</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Delimiter<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span>Split<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token punctuation">,</span> Delimiter<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">S</span><span class="token punctuation">]</span>
<span class="token keyword">type</span> <span class="token class-name">Item</span> <span class="token operator">=</span> <span class="token string">'semlinker,lolo,kakuqo'</span>
<span class="token keyword">type</span> <span class="token class-name">ElementType</span> <span class="token operator">=</span> Split<span class="token operator">&lt;</span>Item<span class="token punctuation">,</span> <span class="token string">','</span><span class="token operator">&gt;</span>

</code></pre></div><h2 id="no-29topath"><a href="#no-29topath" class="header-anchor">#</a> No.29	ToPath</h2> <blockquote><p>实现一个 <code>ToPath</code> 工具类型，用于把属性访问（<code>.</code> 或 <code>[]</code>）路径转换为元组的形式。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">ToPath<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

ToPath<span class="token operator">&lt;</span><span class="token string">'foo.bar.baz'</span><span class="token operator">&gt;</span> <span class="token comment">//=&gt; ['foo', 'bar', 'baz']</span>
ToPath<span class="token operator">&lt;</span><span class="token string">'foo[0].bar.baz'</span><span class="token operator">&gt;</span> <span class="token comment">//=&gt; ['foo', '0', 'bar', 'baz']</span>
</code></pre></div></blockquote> <h3 id="分析-依旧从结构上出发-infer-t-infer-r-、-infer-f-infer-a-分别对应-和-的结构"><a href="#分析-依旧从结构上出发-infer-t-infer-r-、-infer-f-infer-a-分别对应-和-的结构" class="header-anchor">#</a> 分析：依旧从结构上出发，${infer T}.${infer R}、${infer F}[${infer A}]，分别对应.和[]的结构</h3> <h3 id="方法-29"><a href="#方法-29" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//question</span>
<span class="token comment">// 实现一个 ToPath 工具类型，用于把属性访问（. 或 []）路径转换为元组的形式。具体的使用示例如下所示：</span>
<span class="token comment">// type ToPath&lt;S extends string&gt; = // 你的实现代码</span>
<span class="token comment">// ToPath&lt;'foo.bar.baz'&gt; //=&gt; ['foo', 'bar', 'baz']</span>
<span class="token comment">// ToPath&lt;'foo[0].bar.baz'&gt; //=&gt; ['foo', '0', 'bar', 'baz']</span>

<span class="token comment">//answer</span>
<span class="token keyword">type</span> <span class="token class-name">ToPath<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">T</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">F</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">A</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]</span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token constant">F</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token punctuation">,</span> <span class="token operator">...</span>ToPath<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span>ToPath<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">S</span><span class="token punctuation">]</span>
<span class="token keyword">type</span> <span class="token class-name">a1</span> <span class="token operator">=</span> ToPath<span class="token operator">&lt;</span><span class="token string">'foo.bar.baz'</span><span class="token operator">&gt;</span> <span class="token comment">//=&gt; ['foo', 'bar', 'baz']</span>
<span class="token keyword">type</span> <span class="token class-name">a2</span> <span class="token operator">=</span> ToPath<span class="token operator">&lt;</span><span class="token string">'foo[0].bar.baz'</span><span class="token operator">&gt;</span> <span class="token comment">//=&gt; ['foo', '0', 'bar', 'baz']</span>

</code></pre></div><h2 id="no-30chainable"><a href="#no-30chainable" class="header-anchor">#</a> No.30	Chainable</h2> <blockquote><p>完善 <code>Chainable</code> 类型的定义，使得 TS 能成功推断出 <code>result</code> 变量的类型。调用 <code>option</code> 方法之后会不断扩展当前对象的类型，使得调用 <code>get</code> 方法后能获取正确的类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">const</span> config<span class="token operator">:</span> Chainable

<span class="token keyword">type</span> <span class="token class-name">Chainable</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">option</span><span class="token punctuation">(</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> config
  <span class="token punctuation">.</span><span class="token function">option</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">option</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'lolo'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">option</span><span class="token punctuation">(</span><span class="token string">'address'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">'XiaMen'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">type</span> <span class="token class-name">ResultType</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> result  
<span class="token comment">// 期望 ResultType 的类型是：</span>
<span class="token comment">// {</span>
<span class="token comment">//   age: number</span>
<span class="token comment">//   name: string</span>
<span class="token comment">//   address: {</span>
<span class="token comment">//     value: string</span>
<span class="token comment">//   }</span>
<span class="token comment">// }</span>
</code></pre></div></blockquote> <h3 id="分析-链式操作的前提是前一个操作的返回值保持一致-即这里的chainable-即option方法的返回值类型-最后的get方法的返回值应该是之前所有option中键值对的集合-即所有键值对的交叉类型。每一次的option中的键值对都需要和前一次option作交叉-所以需要保存前一次option中的键值对-所以想到在chainable中定义泛型变量初始值为"><a href="#分析-链式操作的前提是前一个操作的返回值保持一致-即这里的chainable-即option方法的返回值类型-最后的get方法的返回值应该是之前所有option中键值对的集合-即所有键值对的交叉类型。每一次的option中的键值对都需要和前一次option作交叉-所以需要保存前一次option中的键值对-所以想到在chainable中定义泛型变量初始值为" class="header-anchor">#</a> 分析：链式操作的前提是前一个操作的返回值保持一致，即这里的Chainable，即option方法的返回值类型，最后的get方法的返回值应该是之前所有option中键值对的集合，即所有键值对的交叉类型。每一次的option中的键值对都需要和前一次option作交叉，所以需要保存前一次option中的键值对，所以想到在Chainable中定义泛型变量初始值为{}</h3> <h3 id="方法-30"><a href="#方法-30" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 完善 Chainable 类型的定义，使得 TS 能成功推断出 result 变量的类型。调用 option 方法之后会不断扩展当前对象的类型，使得调用 get 方法后能获取正确的类型。</span>
<span class="token comment">// declare const config: Chainable</span>
<span class="token comment">// type Chainable = {</span>
<span class="token comment">//   option(key: string, value: any): any</span>
<span class="token comment">//   get(): any</span>
<span class="token comment">// }</span>
<span class="token comment">// const result = config</span>
<span class="token comment">//   .option('age', 7)</span>
<span class="token comment">//   .option('name', 'lolo')</span>
<span class="token comment">//   .option('address', { value: 'XiaMen' })</span>
<span class="token comment">//   .get()</span>
<span class="token comment">// type ResultType = typeof result</span>
<span class="token comment">// 期望 ResultType 的类型是：</span>
<span class="token comment">// {</span>
<span class="token comment">//   age: number</span>
<span class="token comment">//   name: string</span>
<span class="token comment">//   address: {</span>
<span class="token comment">//     value: string</span>
<span class="token comment">//   }</span>
<span class="token comment">// }</span>

<span class="token comment">//answer1</span>
<span class="token comment">// type Simplify&lt;T&gt; = {</span>
<span class="token comment">//   [P in keyof T]: T[P]</span>
<span class="token comment">// }</span>
<span class="token comment">// type Chainable&lt;T = {}&gt; = {</span>
<span class="token comment">//   option&lt;V, S extends string&gt;(</span>
<span class="token comment">//     key: S,</span>
<span class="token comment">//     value: V</span>
<span class="token comment">//   ): Chainable&lt;</span>
<span class="token comment">//     T &amp; {</span>
<span class="token comment">//       [P in keyof {</span>
<span class="token comment">//         S: S</span>
<span class="token comment">//       } as `${S}`]: V</span>
<span class="token comment">//     }</span>
<span class="token comment">//   &gt;</span>
<span class="token comment">//   get(): Simplify&lt;T&gt;</span>
<span class="token comment">// }</span>

<span class="token comment">//answer2</span>
<span class="token keyword">type</span> <span class="token class-name">ITypes</span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">symbol</span>
<span class="token keyword">type</span> <span class="token class-name">Chainable<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token generic-function"><span class="token function">option</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">K</span> <span class="token keyword">extends</span> ITypes<span class="token punctuation">,</span> <span class="token constant">V</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>key<span class="token operator">:</span> <span class="token constant">K</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token constant">V</span><span class="token punctuation">)</span><span class="token operator">:</span> Chainable<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">&amp;</span> Record<span class="token operator">&lt;</span><span class="token constant">K</span><span class="token punctuation">,</span> <span class="token constant">V</span><span class="token operator">&gt;&gt;</span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="no-31repeat"><a href="#no-31repeat" class="header-anchor">#</a> No.31	Repeat</h2> <blockquote><p>实现一个 <code>Repeat</code> 工具类型，用于根据类型变量 <code>C</code> 的值，重复 <code>T</code> 类型并以元组的形式返回新的类型。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Repeat<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">R0</span></span> <span class="token operator">=</span> Repeat<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// []</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">R1</span></span> <span class="token operator">=</span> Repeat<span class="token operator">&lt;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// [1]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">R2</span></span> <span class="token operator">=</span> Repeat<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// [number, number]</span>
</code></pre></div></blockquote> <h3 id="分析-整体思路是不断的往一个元组里添加类型-判断这个元组的length是否extends-c-如果符合就返回元组"><a href="#分析-整体思路是不断的往一个元组里添加类型-判断这个元组的length是否extends-c-如果符合就返回元组" class="header-anchor">#</a> 分析：整体思路是不断的往一个元组里添加类型，判断这个元组的length是否extends C，如果符合就返回元组</h3> <h3 id="方法-31"><a href="#方法-31" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 实现一个 Repeat 工具类型，用于根据类型变量 C 的值，重复 T 类型并以元组的形式返回新的类型。具体的使用示例如下所示：</span>
<span class="token comment">// type Repeat&lt;T, C extends number&gt; = // 你的实现代码</span>
<span class="token comment">// type R0 = Repeat&lt;0, 0&gt;; // []</span>
<span class="token comment">// type R1 = Repeat&lt;1, 1&gt;; // [1]</span>
<span class="token comment">// type R2 = Repeat&lt;number, 2&gt;; // [number, number]</span>

<span class="token comment">//answer</span>
<span class="token keyword">type</span> <span class="token class-name">Repeat<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">A</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">?</span> <span class="token constant">A</span> <span class="token operator">:</span> Repeat<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>

</code></pre></div><h2 id="no-32repeatstring"><a href="#no-32repeatstring" class="header-anchor">#</a> No.32	RepeatString</h2> <blockquote><p>实现一个 <code>RepeatString</code> 工具类型，用于根据类型变量 <code>C</code> 的值，重复 <code>T</code> 类型并以字符串的形式返回新的类型。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">RepeatString<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S0</span></span> <span class="token operator">=</span> RepeatString<span class="token operator">&lt;</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// ''</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S1</span></span> <span class="token operator">=</span> RepeatString<span class="token operator">&lt;</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 'aa'</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S2</span></span> <span class="token operator">=</span> RepeatString<span class="token operator">&lt;</span><span class="token string">&quot;ab&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 'ababab'</span>
</code></pre></div></blockquote> <h3 id="分析-思路依旧是利用模板字面量-向字符串中添加类型-但是数字的比较只能利用-数组的-lenght属性来实现-字符串的-length属性在tsc阶段无法获取到真实长度-只能得到number类型-所以需要额外声明一个类型变量-来探测字符串的长度"><a href="#分析-思路依旧是利用模板字面量-向字符串中添加类型-但是数字的比较只能利用-数组的-lenght属性来实现-字符串的-length属性在tsc阶段无法获取到真实长度-只能得到number类型-所以需要额外声明一个类型变量-来探测字符串的长度" class="header-anchor">#</a> 分析：思路依旧是利用模板字面量，向字符串中添加类型，但是数字的比较只能利用 数组的 lenght属性来实现，字符串的 length属性在tsc阶段无法获取到真实长度，只能得到number类型，所以需要额外声明一个类型变量[]，来探测字符串的长度</h3> <h3 id="方法-32"><a href="#方法-32" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 实现一个 RepeatString 工具类型，用于根据类型变量 C 的值，重复 T 类型并以字符串的形式返回新的类型。具体的使用示例如下所示：</span>
<span class="token comment">// type RepeatString&lt;</span>
<span class="token comment">//   T extends string,</span>
<span class="token comment">//   C extends number,</span>
<span class="token comment">// &gt; = // 你的实现代码</span>
<span class="token comment">// type S0 = RepeatString&lt;&quot;a&quot;, 0&gt;; // ''</span>
<span class="token comment">// type S1 = RepeatString&lt;&quot;a&quot;, 2&gt;; // 'aa'</span>
<span class="token comment">// type S2 = RepeatString&lt;&quot;ab&quot;, 3&gt;; // 'ababab'</span>

<span class="token comment">//answer</span>
<span class="token comment">//数字的比较只能利用 数组的 lenght属性来实现，字符串的 length属性在tsc阶段无法获取到真实长度，只能得到number类型。</span>
<span class="token keyword">type</span> <span class="token class-name">RepeatString<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//  用于判断是否递归完毕</span>
  <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span> <span class="token comment">//  用于累加记录已遍历过的字符串</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">?</span> <span class="token constant">U</span> <span class="token operator">:</span> RepeatString<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">S</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">U</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">T</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token operator">&gt;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S0</span></span> <span class="token operator">=</span> RepeatString<span class="token operator">&lt;</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">&gt;</span> <span class="token comment">// ''</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S1</span></span> <span class="token operator">=</span> RepeatString<span class="token operator">&lt;</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">&gt;</span> <span class="token comment">// 'aa'</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S2</span></span> <span class="token operator">=</span> RepeatString<span class="token operator">&lt;</span><span class="token string">'ab'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">&gt;</span> <span class="token comment">// 'ababab'</span>

<span class="token keyword">type</span> <span class="token class-name">a20</span> <span class="token operator">=</span> <span class="token string">'123456'</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token comment">//number</span>
<span class="token keyword">type</span> <span class="token class-name">a21</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token comment">//6</span>

</code></pre></div><h2 id="no-33tonumber"><a href="#no-33tonumber" class="header-anchor">#</a> No.33	ToNumber</h2> <blockquote><p>实现一个 <code>ToNumber</code> 工具类型，用于实现把数值字符串类型转换为数值类型。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">ToNumber<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T0</span></span> <span class="token operator">=</span> ToNumber<span class="token operator">&lt;</span><span class="token string">&quot;0&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> ToNumber<span class="token operator">&lt;</span><span class="token string">&quot;10&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token operator">=</span> ToNumber<span class="token operator">&lt;</span><span class="token string">&quot;20&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 20</span>
</code></pre></div></blockquote> <h3 id="分析-没有办法直接转-那么想到数组的长度-向一个数组中不断添加元素-最后用这个数组的length与t相比-如果extends则返回对应的length-所以需要一个数组存放元素-还需要一个数组的length值探测是否达到目标值"><a href="#分析-没有办法直接转-那么想到数组的长度-向一个数组中不断添加元素-最后用这个数组的length与t相比-如果extends则返回对应的length-所以需要一个数组存放元素-还需要一个数组的length值探测是否达到目标值" class="header-anchor">#</a> 分析：没有办法直接转，那么想到数组的长度，向一个数组中不断添加元素，最后用这个数组的<code>length</code>与T相比，如果extends则返回对应的length，所以需要一个数组存放元素，还需要一个数组的length值探测是否达到目标值</h3> <h3 id="方法-33"><a href="#方法-33" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 实现一个 ToNumber 工具类型，用于实现把数值字符串类型转换为数值类型。具体的使用示例如下所示：</span>
<span class="token comment">// type ToNumber&lt;T extends string&gt; = // 你的实现代码</span>
<span class="token comment">// type T0 = ToNumber&lt;&quot;0&quot;&gt;; // 0</span>
<span class="token comment">// type T1 = ToNumber&lt;&quot;10&quot;&gt;; // 10</span>
<span class="token comment">// type T2 = ToNumber&lt;&quot;20&quot;&gt;; // 20</span>

<span class="token keyword">type</span> <span class="token class-name">ToNumber<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">L</span> <span class="token keyword">extends</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token constant">S</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">L</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">?</span> <span class="token constant">L</span> <span class="token operator">:</span> ToNumber<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">S</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T0</span></span> <span class="token operator">=</span> ToNumber<span class="token operator">&lt;</span><span class="token string">'0'</span><span class="token operator">&gt;</span> <span class="token comment">// 0</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> ToNumber<span class="token operator">&lt;</span><span class="token string">'10'</span><span class="token operator">&gt;</span> <span class="token comment">// 10</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token operator">=</span> ToNumber<span class="token operator">&lt;</span><span class="token string">'20'</span><span class="token operator">&gt;</span> <span class="token comment">// 20</span>

</code></pre></div><h2 id="no-34smallerthan"><a href="#no-34smallerthan" class="header-anchor">#</a> No.34	SmallerThan</h2> <blockquote><p>实现一个 <code>SmallerThan</code> 工具类型，用于比较数值类型的大小。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">SmallerThan<span class="token operator">&lt;</span>
  <span class="token constant">N</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  <span class="token constant">M</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S0</span></span> <span class="token operator">=</span> SmallerThan<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S1</span></span> <span class="token operator">=</span> SmallerThan<span class="token operator">&lt;</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S2</span></span> <span class="token operator">=</span> SmallerThan<span class="token operator">&lt;</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div></blockquote> <h3 id="分析-数字的比较只能利用-数组的-lenght属性来实现-这里只需要比较大小-所以可以声明一个类型变量-不断的向其中添加元素-如果谁先extends数组的length-那么谁就是小的那个"><a href="#分析-数字的比较只能利用-数组的-lenght属性来实现-这里只需要比较大小-所以可以声明一个类型变量-不断的向其中添加元素-如果谁先extends数组的length-那么谁就是小的那个" class="header-anchor">#</a> 分析：数字的比较只能利用 数组的 lenght属性来实现，这里只需要比较大小，所以可以声明一个类型变量[]，不断的向其中添加元素，如果谁先extends数组的length，那么谁就是小的那个</h3> <h3 id="方法-34"><a href="#方法-34" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 实现一个 SmallerThan 工具类型，用于比较数值类型的大小。具体的使用示例如下所示：</span>
<span class="token comment">// type SmallerThan&lt;</span>
<span class="token comment">//   N extends number,</span>
<span class="token comment">//   M extends number,</span>
<span class="token comment">// &gt; = // 你的实现代码</span>
<span class="token comment">// type S0 = SmallerThan&lt;0, 1&gt;; // true</span>
<span class="token comment">// type S1 = SmallerThan&lt;2, 0&gt;; // false</span>
<span class="token comment">// type S2 = SmallerThan&lt;8, 10&gt;; // true</span>

<span class="token comment">//answer</span>
<span class="token keyword">type</span> <span class="token class-name">SmallerThan<span class="token operator">&lt;</span><span class="token constant">N</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token constant">M</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">N</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">A</span></span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token constant">M</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">A</span></span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> SmallerThan<span class="token operator">&lt;</span><span class="token constant">N</span><span class="token punctuation">,</span> <span class="token constant">M</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S00</span></span> <span class="token operator">=</span> SmallerThan<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S11</span></span> <span class="token operator">=</span> SmallerThan<span class="token operator">&lt;</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S22</span></span> <span class="token operator">=</span> SmallerThan<span class="token operator">&lt;</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>

</code></pre></div><h2 id="no-35add"><a href="#no-35add" class="header-anchor">#</a> No.35	Add</h2> <blockquote><p>实现一个 <code>Add</code> 工具类型，用于实现对数值类型对应的数值进行加法运算。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Add<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A0</span></span> <span class="token operator">=</span> Add<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A1</span></span> <span class="token operator">=</span> Add<span class="token operator">&lt;</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token operator">&gt;</span> <span class="token comment">// 28</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A2</span></span> <span class="token operator">=</span> Add<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 40</span>
</code></pre></div></blockquote> <h3 id="分析-数字的比较只能利用-数组的-lenght属性来实现-ts中类型之间无法直接加减乘除-所以利用数组的长度-声明一个类型arr-这个类型主要用来记录对应的数值的大小-通过调用两次-得到两个数组-最后再将两个数组通过扩展运算符合并-最后取这个数组的length就是两数之和"><a href="#分析-数字的比较只能利用-数组的-lenght属性来实现-ts中类型之间无法直接加减乘除-所以利用数组的长度-声明一个类型arr-这个类型主要用来记录对应的数值的大小-通过调用两次-得到两个数组-最后再将两个数组通过扩展运算符合并-最后取这个数组的length就是两数之和" class="header-anchor">#</a> 分析：数字的比较只能利用 数组的 lenght属性来实现，ts中类型之间无法直接加减乘除，所以利用数组的长度，声明一个类型Arr，这个类型主要用来记录对应的数值的大小，通过调用两次，得到两个数组，最后再将两个数组通过扩展运算符合并，最后取这个数组的length就是两数之和</h3> <h3 id="方法-35"><a href="#方法-35" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 实现一个 Add 工具类型，用于实现对数值类型对应的数值进行加法运算。具体的使用示例如下所示：</span>
<span class="token comment">// type Add&lt;T, R&gt; = // 你的实现代码</span>
<span class="token comment">// type A0 = Add&lt;5, 5&gt;; // 10</span>
<span class="token comment">// type A1 = Add&lt;8, 20&gt; // 28</span>
<span class="token comment">// type A2 = Add&lt;10, 30&gt;; // 40</span>

<span class="token comment">//answer</span>
<span class="token keyword">type</span> <span class="token class-name">GenArr<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">?</span> <span class="token constant">S</span> <span class="token operator">:</span> GenArr<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">S</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
<span class="token keyword">type</span> <span class="token class-name">Add<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token constant">R</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>GenArr<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">...</span>GenArr<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>

</code></pre></div><h2 id="no-36filter"><a href="#no-36filter" class="header-anchor">#</a> No.36	Filter</h2> <blockquote><p>实现一个 <code>Filter</code> 工具类型，用于根据类型变量 <code>F</code> 的值进行类型过滤。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Filter<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">F</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F0</span></span> <span class="token operator">=</span> Filter<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">&quot;lolo&quot;</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">&quot;semlinker&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// [6, 7]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F1</span></span> <span class="token operator">=</span> Filter<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token string">&quot;kakuqo&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;ts&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;lolo&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;kakuqo&quot;, &quot;lolo&quot;]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F2</span></span> <span class="token operator">=</span> Filter<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token string">&quot;abao&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// [any, &quot;abao&quot;]</span>
</code></pre></div></blockquote> <h3 id="分析-对数组的每一项进行检查-如果符合就存放到一个数组中-不符合就继续检查剩余项-🔔any、never为联合类型-使用-包装阻止类型分发"><a href="#分析-对数组的每一项进行检查-如果符合就存放到一个数组中-不符合就继续检查剩余项-🔔any、never为联合类型-使用-包装阻止类型分发" class="header-anchor">#</a> 分析：对数组的每一项进行检查，如果符合就存放到一个数组中，不符合就继续检查剩余项，<em>🔔any、never为联合类型，使用[]包装阻止类型分发</em></h3> <h3 id="方法-36"><a href="#方法-36" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 实现一个 Filter 工具类型，用于根据类型变量 F 的值进行类型过滤。具体的使用示例如下所示：</span>
<span class="token comment">// type Filter&lt;T extends any[], F&gt; = // 你的实现代码</span>
<span class="token comment">// type F0 = Filter&lt;[6, &quot;lolo&quot;, 7, &quot;semlinker&quot;, false], number&gt;; // [6, 7]</span>
<span class="token comment">// type F1 = Filter&lt;[&quot;kakuqo&quot;, 2, [&quot;ts&quot;], &quot;lolo&quot;], string&gt;; // [&quot;kakuqo&quot;, &quot;lolo&quot;]</span>
<span class="token comment">// type F2 = Filter&lt;[0, true, any, &quot;abao&quot;], string&gt;; // [any, &quot;abao&quot;]</span>

<span class="token comment">//answer  🔔any、never为联合类型，使用[]包装阻止类型分发</span>
<span class="token keyword">type</span> <span class="token class-name">Filter<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">F</span><span class="token punctuation">,</span> Result <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> <span class="token constant">N</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> <span class="token constant">L</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token constant">N</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">F</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">?</span> Filter<span class="token operator">&lt;</span><span class="token constant">L</span><span class="token punctuation">,</span> <span class="token constant">F</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span>Result<span class="token punctuation">,</span> <span class="token constant">N</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token operator">:</span> Filter<span class="token operator">&lt;</span><span class="token constant">L</span><span class="token punctuation">,</span> <span class="token constant">F</span><span class="token punctuation">,</span> Result<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">:</span> Result
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F0</span></span> <span class="token operator">=</span> Filter<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">'lolo'</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">'semlinker'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token comment">// [6, 7]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F1</span></span> <span class="token operator">=</span> Filter<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token string">'kakuqo'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'ts'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'lolo'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token comment">// [&quot;kakuqo&quot;, &quot;lolo&quot;]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F2</span></span> <span class="token operator">=</span> Filter<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token string">'abao'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token comment">// [any, &quot;abao&quot;]</span>

</code></pre></div><h2 id="no-37flat"><a href="#no-37flat" class="header-anchor">#</a> No.37	Flat</h2> <blockquote><p>实现一个 <code>Flat</code> 工具类型，支持把数组类型拍平（扁平化）。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Flat<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F0</span></span> <span class="token operator">=</span> Flat<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// []</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F1</span></span> <span class="token operator">=</span> Flat<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F2</span></span> <span class="token operator">=</span> Flat<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'e'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'f'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;]</span>
</code></pre></div></blockquote> <h3 id="分析-对数组每一项进行判断-如果为数组-就递归拆分"><a href="#分析-对数组每一项进行判断-如果为数组-就递归拆分" class="header-anchor">#</a> 分析：对数组每一项进行判断，如果为数组，就递归拆分</h3> <h3 id="方法-37"><a href="#方法-37" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 实现一个 Flat 工具类型，支持把数组类型拍平（扁平化）。具体的使用示例如下所示：</span>
<span class="token comment">// type Flat&lt;T extends any[]&gt; = // 你的实现代码</span>
<span class="token comment">// type F0 = Flat&lt;[]&gt; // []</span>
<span class="token comment">// type F1 = Flat&lt;['a', 'b', 'c']&gt; // [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span>
<span class="token comment">// type F2 = Flat&lt;['a', ['b', 'c'], ['d', ['e', ['f']]]]&gt; // [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;]</span>

<span class="token keyword">type</span> <span class="token class-name">Flat<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> First<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> Rest<span class="token punctuation">]</span>
  <span class="token operator">?</span> First <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token operator">...</span>Flat<span class="token operator">&lt;</span>First<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">...</span>Flat<span class="token operator">&lt;</span>Rest<span class="token operator">&gt;</span><span class="token punctuation">]</span>
    <span class="token operator">:</span> <span class="token punctuation">[</span>First<span class="token punctuation">,</span> <span class="token operator">...</span>Flat<span class="token operator">&lt;</span>Rest<span class="token operator">&gt;</span><span class="token punctuation">]</span>
  <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F00</span></span> <span class="token operator">=</span> Flat<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// []</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F11</span></span> <span class="token operator">=</span> Flat<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F22</span></span> <span class="token operator">=</span> Flat<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'e'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'f'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;]</span>

</code></pre></div><h2 id="no-38startswith-endswith"><a href="#no-38startswith-endswith" class="header-anchor">#</a> No.38	StartsWith&amp;EndsWith</h2> <blockquote><p>实现 <code>StartsWith</code> 工具类型，判断字符串字面量类型 <code>T</code> 是否以给定的字符串字面量类型 <code>U</code> 开头，并根据判断结果返回布尔值。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">StartsWith<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S0</span></span> <span class="token operator">=</span> StartsWith<span class="token operator">&lt;</span><span class="token string">'123'</span><span class="token punctuation">,</span> <span class="token string">'12'</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S1</span></span> <span class="token operator">=</span> StartsWith<span class="token operator">&lt;</span><span class="token string">'123'</span><span class="token punctuation">,</span> <span class="token string">'13'</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S2</span></span> <span class="token operator">=</span> StartsWith<span class="token operator">&lt;</span><span class="token string">'123'</span><span class="token punctuation">,</span> <span class="token string">'1234'</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
</code></pre></div><p>此外，继续实现 <code>EndsWith</code> 工具类型，判断字符串字面量类型 <code>T</code> 是否以给定的字符串字面量类型 <code>U</code> 结尾，并根据判断结果返回布尔值。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">EndsWith<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">E0</span></span> <span class="token operator">=</span> EndsWith<span class="token operator">&lt;</span><span class="token string">'123'</span><span class="token punctuation">,</span> <span class="token string">'23'</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">E1</span></span> <span class="token operator">=</span> EndsWith<span class="token operator">&lt;</span><span class="token string">'123'</span><span class="token punctuation">,</span> <span class="token string">'13'</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">E2</span></span> <span class="token operator">=</span> EndsWith<span class="token operator">&lt;</span><span class="token string">'123'</span><span class="token punctuation">,</span> <span class="token string">'123'</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
</code></pre></div></blockquote> <h3 id="分析-用类型u作为模板字面量类型的首尾类型用来判断-t是否是以u开头、结尾的"><a href="#分析-用类型u作为模板字面量类型的首尾类型用来判断-t是否是以u开头、结尾的" class="header-anchor">#</a> 分析：用类型U作为模板字面量类型的首尾类型用来判断，T是否是以U开头、结尾的</h3> <h3 id="方法-38"><a href="#方法-38" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 实现 StartsWith 工具类型，判断字符串字面量类型 T 是否以给定的字符串字面量类型 U 开头，并根据判断结果返回布尔值。具体的使用示例如下所示：</span>
<span class="token comment">// type StartsWith&lt;T extends string, U extends string&gt; = // 你的实现代码</span>
<span class="token comment">// type S0 = StartsWith&lt;'123', '12'&gt; // true</span>
<span class="token comment">// type S1 = StartsWith&lt;'123', '13'&gt; // false</span>
<span class="token comment">// type S2 = StartsWith&lt;'123', '1234'&gt; // false</span>

<span class="token keyword">type</span> <span class="token class-name">StartsWith<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">U</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S000</span></span> <span class="token operator">=</span> StartsWith<span class="token operator">&lt;</span><span class="token string">'123'</span><span class="token punctuation">,</span> <span class="token string">'12'</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S111</span></span> <span class="token operator">=</span> StartsWith<span class="token operator">&lt;</span><span class="token string">'123'</span><span class="token punctuation">,</span> <span class="token string">'13'</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S222</span></span> <span class="token operator">=</span> StartsWith<span class="token operator">&lt;</span><span class="token string">'123'</span><span class="token punctuation">,</span> <span class="token string">'1234'</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>

<span class="token comment">// 此外，继续实现 EndsWith 工具类型，判断字符串字面量类型 T 是否以给定的字符串字面量类型 U 结尾，并根据判断结果返回布尔值。具体的使用示例如下所示：</span>
<span class="token comment">// type EndsWith&lt;T extends string, U extends string&gt; = // 你的实现代码</span>
<span class="token comment">// type E0 = EndsWith&lt;'123', '23'&gt; // true</span>
<span class="token comment">// type E1 = EndsWith&lt;'123', '13'&gt; // false</span>
<span class="token comment">// type E2 = EndsWith&lt;'123', '123'&gt; // true</span>

<span class="token keyword">type</span> <span class="token class-name">EndsWith<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">U</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">E0</span></span> <span class="token operator">=</span> EndsWith<span class="token operator">&lt;</span><span class="token string">'123'</span><span class="token punctuation">,</span> <span class="token string">'23'</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">E11</span></span> <span class="token operator">=</span> EndsWith<span class="token operator">&lt;</span><span class="token string">'123'</span><span class="token punctuation">,</span> <span class="token string">'13'</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">E2</span></span> <span class="token operator">=</span> EndsWith<span class="token operator">&lt;</span><span class="token string">'123'</span><span class="token punctuation">,</span> <span class="token string">'123'</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>

</code></pre></div><h2 id="no-39isany"><a href="#no-39isany" class="header-anchor">#</a> No.39	IsAny</h2> <blockquote><p>实现 <code>IsAny</code> 工具类型，用于判断类型 <code>T</code> 是否为 <code>any</code> 类型。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">IsAny<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I0</span></span> <span class="token operator">=</span> IsAny<span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I1</span></span> <span class="token operator">=</span> IsAny<span class="token operator">&lt;</span><span class="token builtin">unknown</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I2</span></span> <span class="token operator">=</span> IsAny<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
</code></pre></div></blockquote> <h3 id="分析-除never外-any会吞噬掉其他类型的值-即any与其他类型相交叉为any-所以随意找两个不用的字面量类型-对t进行判断-如果其中一个值extends-t与另一个值的交叉类型-那么这个类型就是any"><a href="#分析-除never外-any会吞噬掉其他类型的值-即any与其他类型相交叉为any-所以随意找两个不用的字面量类型-对t进行判断-如果其中一个值extends-t与另一个值的交叉类型-那么这个类型就是any" class="header-anchor">#</a> 分析：除never外，any会吞噬掉其他类型的值，即any与其他类型相交叉为any，所以随意找两个不用的字面量类型，对T进行判断，如果其中一个值extends T与另一个值的交叉类型，那么这个类型就是any</h3> <h3 id="方法-39"><a href="#方法-39" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 实现 IsAny 工具类型，用于判断类型 T[] 是否为 any 类型。具体的使用示例如下所示：</span>
<span class="token comment">// type IsAny&lt;T[]&gt; = // 你的实现代码</span>
<span class="token comment">// type I0 = IsAny&lt;never&gt; // false</span>
<span class="token comment">// type I1 = IsAny&lt;unknown&gt; // false</span>
<span class="token comment">// type I2 = IsAny&lt;any&gt; // true</span>

<span class="token comment">//除never外，any会吞噬掉其他类型的值，即any与其他类型相交叉为any</span>
<span class="token keyword">type</span> <span class="token class-name">IsAny<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">extends</span> <span class="token number">1</span> <span class="token operator">&amp;</span> <span class="token constant">T</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token comment">// type IsAny&lt;T&gt; = T[] extends never[]</span>
<span class="token comment">//   ? false</span>
<span class="token comment">//   : T[] extends string[]</span>
<span class="token comment">//   ? T[] extends number[]</span>
<span class="token comment">//     ? T[] extends boolean[]</span>
<span class="token comment">//       ? T[] extends object[]</span>
<span class="token comment">//         ? T[] extends unknown[]</span>
<span class="token comment">//           ? T[] extends symbol[]</span>
<span class="token comment">//             ? T[] extends null[]</span>
<span class="token comment">//               ? T[] extends undefined[]</span>
<span class="token comment">//                 ? T[] extends bigint[]</span>
<span class="token comment">//                   ? T[] extends any[]</span>
<span class="token comment">//                     ? true</span>
<span class="token comment">//                     : false</span>
<span class="token comment">//                   : false</span>
<span class="token comment">//                 : false</span>
<span class="token comment">//               : false</span>
<span class="token comment">//             : false</span>
<span class="token comment">//           : false</span>
<span class="token comment">//         : false</span>
<span class="token comment">//       : false</span>
<span class="token comment">//     : false</span>
<span class="token comment">//   : false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I00</span></span> <span class="token operator">=</span> IsAny<span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I11</span></span> <span class="token operator">=</span> IsAny<span class="token operator">&lt;</span><span class="token builtin">unknown</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I22</span></span> <span class="token operator">=</span> IsAny<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>

</code></pre></div><h2 id="no-40anyof"><a href="#no-40anyof" class="header-anchor">#</a> No.40	AnyOf</h2> <blockquote><p>实现 <code>AnyOf</code> 工具类型，只要数组中任意元素的类型非 <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Falsy" target="_blank" rel="noopener noreferrer">Falsy<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 类型、 <code>{}</code> 类型或 <code>[]</code> 类型，则返回 <code>true</code>，否则返回 <code>false</code>。如果数组为空的话，则返回 <code>false</code>。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">AnyOf<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A0</span></span> <span class="token operator">=</span> AnyOf<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A1</span></span> <span class="token operator">=</span> AnyOf<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A2</span></span> <span class="token operator">=</span> AnyOf<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>
</code></pre></div></blockquote> <h3 id="分析-对假值进行罗列-声明一个类型存储这些假值-基本类型也都属于对象类型-所以需要对-额外判断"><a href="#分析-对假值进行罗列-声明一个类型存储这些假值-基本类型也都属于对象类型-所以需要对-额外判断" class="header-anchor">#</a> 分析：对假值进行罗列，声明一个类型存储这些假值，基本类型也都属于对象类型，所以需要对{}额外判断</h3> <h3 id="方法-40"><a href="#方法-40" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 实现 AnyOf 工具类型，只要数组中任意元素的类型非 Falsy 类型、 {} 类型或 [] 类型，则返回 true，否则返回 false。如果数组为空的话，则返回 false。具体的使用示例如下所示：</span>
<span class="token comment">// type AnyOf&lt;T extends any[]&gt; = // 你的实现代码</span>
<span class="token comment">// type A0 = AnyOf&lt;[]&gt;; // false</span>
<span class="token comment">// type A1 = AnyOf&lt;[0, '', false, [], {}]&gt; // false</span>
<span class="token comment">// type A2 = AnyOf&lt;[1, &quot;&quot;, false, [], {}]&gt; // true</span>
<span class="token keyword">type</span> <span class="token class-name">NotEmptyObject<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token keyword">type</span> <span class="token class-name">Falsy</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">|</span> <span class="token string">''</span> <span class="token operator">|</span> <span class="token boolean">false</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">type</span> <span class="token class-name">AnyOf<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> First<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> Rest<span class="token punctuation">]</span>
  <span class="token operator">?</span> First <span class="token keyword">extends</span> <span class="token class-name">Falsy</span>
    <span class="token operator">?</span> AnyOf<span class="token operator">&lt;</span>Rest<span class="token operator">&gt;</span>
    <span class="token operator">:</span> NotEmptyObject<span class="token operator">&lt;</span>First<span class="token operator">&gt;</span>
  <span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A0</span></span> <span class="token operator">=</span> AnyOf<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A1</span></span> <span class="token operator">=</span> AnyOf<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A2</span></span> <span class="token operator">=</span> AnyOf<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// true</span>

</code></pre></div><h2 id="no-41replace"><a href="#no-41replace" class="header-anchor">#</a> No.41	Replace</h2> <blockquote><p>实现 <code>Replace</code> 工具类型，用于实现字符串类型的替换操作。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Replace<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  From <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  To <span class="token keyword">extends</span> <span class="token builtin">string</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码 </span>
  
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">R0</span></span> <span class="token operator">=</span> Replace<span class="token operator">&lt;</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token operator">&gt;</span> <span class="token comment">// ''</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">R1</span></span> <span class="token operator">=</span> Replace<span class="token operator">&lt;</span><span class="token string">'foobar'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token operator">&gt;</span> <span class="token comment">// &quot;foofoo&quot;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">R2</span></span> <span class="token operator">=</span> Replace<span class="token operator">&lt;</span><span class="token string">'foobarbar'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token operator">&gt;</span> <span class="token comment">// &quot;foofoobar&quot;</span>
</code></pre></div><p>此外，继续实现 <code>ReplaceAll</code> 工具类型，用于实现替换所有满足条件的子串。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">ReplaceAll<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  From <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  To <span class="token keyword">extends</span> <span class="token builtin">string</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码 </span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">R0</span></span> <span class="token operator">=</span> ReplaceAll<span class="token operator">&lt;</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token operator">&gt;</span> <span class="token comment">// ''</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">R1</span></span> <span class="token operator">=</span> ReplaceAll<span class="token operator">&lt;</span><span class="token string">'barfoo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token operator">&gt;</span> <span class="token comment">// &quot;foofoo&quot;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">R2</span></span> <span class="token operator">=</span> ReplaceAll<span class="token operator">&lt;</span><span class="token string">'foobarbar'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token operator">&gt;</span> <span class="token comment">// &quot;foofoofoo&quot;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">R3</span></span> <span class="token operator">=</span> ReplaceAll<span class="token operator">&lt;</span><span class="token string">'foobarfoobar'</span><span class="token punctuation">,</span> <span class="token string">'ob'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token operator">&gt;</span> <span class="token comment">// &quot;fobarfobar&quot;</span>
</code></pre></div></blockquote> <h3 id="分析-1、已经确定目标值只会出现一次-那么直接对目标值进行一个判断-即目标值会出现在模板字符串的开头、中间、结尾-最后对匹配到的字符串进行一个替换2、要替换所有的-目标值-无非就是加一层递归判断而已-需要注意的是-避免一些多余的判断-例-已经确定目标值在字符串的中间位置-那么前面的那一个字符串就没必要进行递归-否则会导致递归过深"><a href="#分析-1、已经确定目标值只会出现一次-那么直接对目标值进行一个判断-即目标值会出现在模板字符串的开头、中间、结尾-最后对匹配到的字符串进行一个替换2、要替换所有的-目标值-无非就是加一层递归判断而已-需要注意的是-避免一些多余的判断-例-已经确定目标值在字符串的中间位置-那么前面的那一个字符串就没必要进行递归-否则会导致递归过深" class="header-anchor">#</a> 分析：1、已经确定目标值只会出现一次，那么直接对目标值进行一个判断，即目标值会出现在模板字符串的开头、中间、结尾，最后对匹配到的字符串进行一个替换2、要替换所有的，目标值，无非就是加一层递归判断而已，需要注意的是，避免一些多余的判断，例：已经确定目标值在字符串的中间位置，那么前面的那一个字符串就没必要进行递归，否则会导致递归过深</h3> <h3 id="方法-41"><a href="#方法-41" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 实现 Replace 工具类型，用于实现字符串类型的替换操作。具体的使用示例如下所示：</span>
<span class="token comment">// type Replace&lt;</span>
<span class="token comment">//   S extends string,</span>
<span class="token comment">//   From extends string,</span>
<span class="token comment">//   To extends string</span>
<span class="token comment">// &gt; = // 你的实现代码</span>
<span class="token comment">// type R0 = Replace&lt;'', '', ''&gt; // ''</span>
<span class="token comment">// type R1 = Replace&lt;'foobar', 'bar', 'foo'&gt; // &quot;foofoo&quot;</span>
<span class="token comment">// type R2 = Replace&lt;'foobarbar', 'bar', 'foo'&gt; // &quot;foofoobar&quot;</span>

<span class="token keyword">type</span> <span class="token class-name">Replace<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> From <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> To <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>From<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>To<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token operator">:</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Head<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>From<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Head<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>To<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token operator">:</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Head<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> From<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Head<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>To<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token operator">:</span> <span class="token constant">S</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">R0</span></span> <span class="token operator">=</span> Replace<span class="token operator">&lt;</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token operator">&gt;</span> <span class="token comment">// ''</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">R11</span></span> <span class="token operator">=</span> Replace<span class="token operator">&lt;</span><span class="token string">'foobar'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token operator">&gt;</span> <span class="token comment">// &quot;foofoo&quot;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">R2</span></span> <span class="token operator">=</span> Replace<span class="token operator">&lt;</span><span class="token string">'foobarbar'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token operator">&gt;</span> <span class="token comment">// &quot;foofoobar&quot;</span>

<span class="token comment">// 此外，继续实现 ReplaceAll 工具类型，用于实现替换所有满足条件的子串。具体的使用示例如下所示：</span>
<span class="token comment">// type ReplaceAll&lt;</span>
<span class="token comment">//   S extends string,</span>
<span class="token comment">//   From extends string,</span>
<span class="token comment">//   To extends string</span>
<span class="token comment">// &gt; = // 你的实现代码</span>
<span class="token comment">// type R0 = ReplaceAll&lt;'', '', ''&gt; // ''</span>
<span class="token comment">// type R1 = ReplaceAll&lt;'barfoo', 'bar', 'foo'&gt; // &quot;foofoo&quot;</span>
<span class="token comment">// type R2 = ReplaceAll&lt;'foobarbar', 'bar', 'foo'&gt; // &quot;foofoofoo&quot;</span>
<span class="token comment">// type R3 = ReplaceAll&lt;'foobarfoobar', 'ob', 'b'&gt; // &quot;fobarfobar&quot;</span>

<span class="token keyword">type</span> <span class="token class-name">ReplaceAll<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> From <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> To <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>From<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token operator">?</span> <span class="token constant">S</span>
  <span class="token operator">:</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>From<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>To<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ReplaceAll<span class="token operator">&lt;</span>Rest<span class="token punctuation">,</span> From<span class="token punctuation">,</span> To<span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token operator">:</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Head<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>From<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Head<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>To<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ReplaceAll<span class="token operator">&lt;</span>Rest<span class="token punctuation">,</span> From<span class="token punctuation">,</span> To<span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token operator">:</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> Head<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> From<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Head<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>To<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token operator">:</span> <span class="token constant">S</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">R00</span></span> <span class="token operator">=</span> ReplaceAll<span class="token operator">&lt;</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token operator">&gt;</span> <span class="token comment">// ''</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">R111</span></span> <span class="token operator">=</span> ReplaceAll<span class="token operator">&lt;</span><span class="token string">'barfoo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token operator">&gt;</span> <span class="token comment">// &quot;foofoo&quot;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">R22</span></span> <span class="token operator">=</span> ReplaceAll<span class="token operator">&lt;</span><span class="token string">'foobarbar'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token operator">&gt;</span> <span class="token comment">// &quot;foofoofoo&quot;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">R33</span></span> <span class="token operator">=</span> ReplaceAll<span class="token operator">&lt;</span><span class="token string">'foobarfoobar'</span><span class="token punctuation">,</span> <span class="token string">'ob'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token operator">&gt;</span> <span class="token comment">// &quot;fobarfobar&quot;</span>

</code></pre></div><h2 id="no-42indexof"><a href="#no-42indexof" class="header-anchor">#</a> No.42	IndexOf</h2> <blockquote><p>实现 <code>IndexOf</code> 工具类型，用于获取数组类型中指定项的索引值。若不存在的话，则返回 <code>-1</code> 字面量类型。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">IndexOf<span class="token operator">&lt;</span><span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Item<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name">Arr</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I0</span></span> <span class="token operator">=</span> IndexOf<span class="token operator">&lt;</span>Arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">&gt;</span> <span class="token comment">// -1</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I1</span></span> <span class="token operator">=</span> IndexOf<span class="token operator">&lt;</span>Arr<span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">&gt;</span> <span class="token comment">// 0</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I2</span></span> <span class="token operator">=</span> IndexOf<span class="token operator">&lt;</span>Arr<span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">&gt;</span> <span class="token comment">// 2</span>
</code></pre></div></blockquote> <h3 id="分析-重新创建一个类型-变量-用于探测a每一项的类型以及保存对应的索引-当类型变量最终的长度与a的长度相等时-说明不存在该值-如果存在就返回类型变量的长度"><a href="#分析-重新创建一个类型-变量-用于探测a每一项的类型以及保存对应的索引-当类型变量最终的长度与a的长度相等时-说明不存在该值-如果存在就返回类型变量的长度" class="header-anchor">#</a> 分析：重新创建一个类型 变量[]，用于探测A每一项的类型以及保存对应的索引，当类型变量最终的长度与A的长度相等时，说明不存在该值，如果存在就返回类型变量的长度</h3> <h3 id="方法-42"><a href="#方法-42" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 实现 IndexOf 工具类型，用于获取数组类型中指定项的索引值。若不存在的话，则返回 -1 字面量类型。具体的使用示例如下所示：</span>
<span class="token comment">// type IndexOf&lt;A extends any[], Item&gt; = // 你的实现代码</span>
<span class="token comment">// type Arr = [1, 2, 3, 4, 5]</span>
<span class="token comment">// type I0 = IndexOf&lt;Arr, 0&gt; // -1</span>
<span class="token comment">// type I1 = IndexOf&lt;Arr, 1&gt; // 0</span>
<span class="token comment">// type I2 = IndexOf&lt;Arr, 3&gt; // 2</span>

<span class="token keyword">type</span> <span class="token class-name">IndexOf<span class="token operator">&lt;</span><span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Item<span class="token punctuation">,</span> Flag <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> Item <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">A</span></span><span class="token punctuation">[</span>Flag<span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
  <span class="token operator">?</span> Flag<span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>
  <span class="token operator">:</span> Flag<span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">A</span></span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>
  <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span>
  <span class="token operator">:</span> IndexOf<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> Item<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span>Flag<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
<span class="token keyword">type</span> <span class="token class-name">Arr</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I000</span></span> <span class="token operator">=</span> IndexOf<span class="token operator">&lt;</span>Arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">&gt;</span> <span class="token comment">// -1</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I111</span></span> <span class="token operator">=</span> IndexOf<span class="token operator">&lt;</span>Arr<span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">&gt;</span> <span class="token comment">// 0</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I222</span></span> <span class="token operator">=</span> IndexOf<span class="token operator">&lt;</span>Arr<span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">&gt;</span> <span class="token comment">// 2</span>

</code></pre></div><h2 id="no-43permutation"><a href="#no-43permutation" class="header-anchor">#</a> No.43	Permutation</h2> <blockquote><p>实现一个 <code>Permutation</code> 工具类型，当输入一个联合类型时，返回一个包含该联合类型的全排列类型数组。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Permutation<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">=</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token comment">// [&quot;a&quot;, &quot;b&quot;] | [&quot;b&quot;, &quot;a&quot;]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">P0</span></span> <span class="token operator">=</span> Permutation<span class="token operator">&lt;</span><span class="token string">'a'</span> <span class="token operator">|</span> <span class="token string">'b'</span><span class="token operator">&gt;</span>  <span class="token comment">// ['a', 'b'] | ['b' | 'a']</span>
<span class="token comment">// type P1 = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;] | [&quot;a&quot;, &quot;c&quot;, &quot;b&quot;] | [&quot;b&quot;, &quot;a&quot;, &quot;c&quot;] </span>
<span class="token comment">// | [&quot;b&quot;, &quot;c&quot;, &quot;a&quot;] | [&quot;c&quot;, &quot;a&quot;, &quot;b&quot;] | [&quot;c&quot;, &quot;b&quot;, &quot;a&quot;]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">P1</span></span> <span class="token operator">=</span> Permutation<span class="token operator">&lt;</span><span class="token string">'a'</span> <span class="token operator">|</span> <span class="token string">'b'</span> <span class="token operator">|</span> <span class="token string">'c'</span><span class="token operator">&gt;</span> 
</code></pre></div></blockquote> <h3 id="分析-通过映射类型对联合类型进行一个拆分-每次提取一个联合类型的子类型-如果在联合类型中排除此类型后为never-说明这是唯一的、最后的类型那么直接返回-index-如果不为never说明联合类型中还有其他类型-那么将index放在首位-再对联合类型的剩余类型放到index后递归展开-最后遍历类型对应的值-得到一个联合类型-即联合类型的全排列数组"><a href="#分析-通过映射类型对联合类型进行一个拆分-每次提取一个联合类型的子类型-如果在联合类型中排除此类型后为never-说明这是唯一的、最后的类型那么直接返回-index-如果不为never说明联合类型中还有其他类型-那么将index放在首位-再对联合类型的剩余类型放到index后递归展开-最后遍历类型对应的值-得到一个联合类型-即联合类型的全排列数组" class="header-anchor">#</a> 分析：通过映射类型对联合类型进行一个拆分，每次提取一个联合类型的子类型，如果在联合类型中排除此类型后为never，说明这是唯一的、最后的类型那么直接返回[index]，如果不为never说明联合类型中还有其他类型，那么将index放在首位，再对联合类型的剩余类型放到index后递归展开，最后遍历类型对应的值，得到一个联合类型，即联合类型的全排列数组</h3> <h3 id="方法-43"><a href="#方法-43" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 实现一个 Permutation 工具类型，当输入一个联合类型时，返回一个包含该联合类型的全排列类型数组。具体的使用示例如下所示：</span>
<span class="token comment">// type Permutation&lt;T, K=T&gt; = // 你的实现代码</span>
<span class="token comment">// // [&quot;a&quot;, &quot;b&quot;] | [&quot;b&quot;, &quot;a&quot;]</span>
<span class="token comment">// type P0 = Permutation&lt;'a' | 'b'&gt;  // ['a', 'b'] | ['b' | 'a']</span>
<span class="token comment">// // type P1 = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;] | [&quot;a&quot;, &quot;c&quot;, &quot;b&quot;] | [&quot;b&quot;, &quot;a&quot;, &quot;c&quot;]</span>
<span class="token comment">// // | [&quot;b&quot;, &quot;c&quot;, &quot;a&quot;] | [&quot;c&quot;, &quot;a&quot;, &quot;b&quot;] | [&quot;c&quot;, &quot;b&quot;, &quot;a&quot;]</span>
<span class="token comment">// type P1 = Permutation&lt;'a' | 'b' | 'c'&gt;</span>

<span class="token comment">// type Permutation&lt;T, K = T&gt; = [T] extends [never] ? [] : K extends K ? [K, ...Permutation&lt;Exclude&lt;T, K&gt;&gt;] : never</span>
<span class="token keyword">type</span> <span class="token class-name">Permutation<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">symbol</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>index <span class="token keyword">in</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> IsNever<span class="token operator">&lt;</span>Exclude<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> index<span class="token operator">&gt;&gt;</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token boolean">true</span></span> <span class="token operator">?</span> <span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span>index<span class="token punctuation">,</span> <span class="token operator">...</span>Permutation<span class="token operator">&lt;</span>Exclude<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> index<span class="token operator">&gt;&gt;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">P0</span></span> <span class="token operator">=</span> Permutation<span class="token operator">&lt;</span><span class="token string">'a'</span> <span class="token operator">|</span> <span class="token string">'b'</span><span class="token operator">&gt;</span> <span class="token comment">// ['a', 'b'] | ['b' | 'a']</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">P1</span></span> <span class="token operator">=</span> Permutation<span class="token operator">&lt;</span><span class="token string">'a'</span> <span class="token operator">|</span> <span class="token string">'b'</span> <span class="token operator">|</span> <span class="token string">'c'</span><span class="token operator">&gt;</span> <span class="token comment">// type P1 = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;] | [&quot;a&quot;, &quot;c&quot;, &quot;b&quot;] | [&quot;b&quot;, &quot;a&quot;, &quot;c&quot;]| [&quot;b&quot;, &quot;c&quot;, &quot;a&quot;] | [&quot;c&quot;, &quot;a&quot;, &quot;b&quot;] | [&quot;c&quot;, &quot;b&quot;, &quot;a&quot;]</span>

</code></pre></div><h2 id="no-44unpacked"><a href="#no-44unpacked" class="header-anchor">#</a> No.44	Unpacked</h2> <blockquote><p>实现 <code>Unpacked</code> 工具类型，用于对类型执行 “拆箱” 操作。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Unpacked<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T00</span></span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>  <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T01</span></span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>  <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T02</span></span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>  <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T03</span></span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span>  <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T04</span></span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span>Unpacked<span class="token operator">&lt;</span><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span>  <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T05</span></span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>  <span class="token comment">// any</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T06</span></span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>  <span class="token comment">// never</span>
</code></pre></div></blockquote> <h3 id="分析-对包装的情况进行一个罗列-对症下药"><a href="#分析-对包装的情况进行一个罗列-对症下药" class="header-anchor">#</a> 分析：对包装的情况进行一个罗列，对症下药</h3> <h3 id="方法-44"><a href="#方法-44" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 实现 Unpacked 工具类型，用于对类型执行 “拆箱” 操作。具体的使用示例如下所示：</span>
<span class="token comment">// type Unpacked&lt;T&gt; = // 你的实现代码</span>
<span class="token comment">// type T00 = Unpacked&lt;string&gt;;  // string</span>
<span class="token comment">// type T01 = Unpacked&lt;string[]&gt;;  // string</span>
<span class="token comment">// type T02 = Unpacked&lt;() =&gt; string&gt;;  // string</span>
<span class="token comment">// type T03 = Unpacked&lt;Promise&lt;string&gt;&gt;;  // string</span>
<span class="token comment">// type T04 = Unpacked&lt;Unpacked&lt;Promise&lt;string&gt;[]&gt;&gt;;  // string</span>
<span class="token comment">// type T05 = Unpacked&lt;any&gt;;  // any</span>
<span class="token comment">// type T06 = Unpacked&lt;never&gt;;  // never</span>

<span class="token comment">//answer</span>
<span class="token keyword">type</span> <span class="token class-name">Unpacked<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token keyword">infer</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token operator">?</span> <span class="token constant">P</span>
  <span class="token operator">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">infer</span> <span class="token constant">R</span>
  <span class="token operator">?</span> <span class="token constant">R</span>
  <span class="token operator">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">infer</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span>
  <span class="token operator">?</span> <span class="token constant">U</span>
  <span class="token operator">:</span> <span class="token constant">T</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T00</span></span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T01</span></span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T02</span></span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T03</span></span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;&gt;</span> <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T04</span></span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span>Unpacked<span class="token operator">&lt;</span><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;&gt;</span> <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T05</span></span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token comment">// any</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T06</span></span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token operator">&gt;</span> <span class="token comment">// never</span>

</code></pre></div><h2 id="no-45jsonifiedobject"><a href="#no-45jsonifiedobject" class="header-anchor">#</a> No.45	JsonifiedObject</h2> <blockquote><p>实现 <code>JsonifiedObject</code> 工具类型，用于对 <code>object</code> 对象类型进行序列化操作。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">JsonifiedObject<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> object<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name">MyObject</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  str<span class="token operator">:</span> <span class="token string">&quot;literalstring&quot;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">fn</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">,</span>
  date<span class="token operator">:</span> Date<span class="token punctuation">,</span>
  customClass<span class="token operator">:</span> MyClass<span class="token punctuation">,</span>
  obj<span class="token operator">:</span> <span class="token punctuation">{</span>
    prop<span class="token operator">:</span> <span class="token string">&quot;property&quot;</span><span class="token punctuation">,</span>
    clz<span class="token operator">:</span> MyClass<span class="token punctuation">,</span>
    nested<span class="token operator">:</span> <span class="token punctuation">{</span> attr<span class="token operator">:</span> Date <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> <span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
  <span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token string">&quot;MyClass&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * type JsonifiedMyObject = {
 *  str: &quot;literalstring&quot;;
 *  fn: never;
 *  date: string;
 *  customClass: &quot;MyClass&quot;;
 *  obj: JsonifiedObject&lt;{
 *    prop: &quot;property&quot;;
 *    clz: MyClass;
 *    nested: {
 *      attr: Date;
 *    };
 *   }&gt;;
 * }
*/</span>
<span class="token keyword">type</span> <span class="token class-name">JsonifiedMyObject</span> <span class="token operator">=</span> Jsonified<span class="token operator">&lt;</span>MyObject<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">let</span> ex<span class="token operator">:</span> JsonifiedMyObject<span class="token punctuation">;</span>
<span class="token keyword">const</span> z1<span class="token operator">:</span> <span class="token string">&quot;MyClass&quot;</span> <span class="token operator">=</span> ex<span class="token punctuation">.</span>customClass<span class="token punctuation">;</span>
<span class="token keyword">const</span> z2<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> ex<span class="token punctuation">.</span>obj<span class="token punctuation">.</span>nested<span class="token punctuation">.</span>attr<span class="token punctuation">;</span>
</code></pre></div></blockquote> <h3 id="分析-对每一种情况进行罗列-对号入座"><a href="#分析-对每一种情况进行罗列-对号入座" class="header-anchor">#</a> 分析：对每一种情况进行罗列，对号入座</h3> <h3 id="方法-45"><a href="#方法-45" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// type JsonifiedObject&lt;T extends object&gt; = // 你的实现代码</span>
<span class="token comment">// type MyObject = {</span>
<span class="token comment">//   str: &quot;literalstring&quot;,</span>
<span class="token comment">//   fn: () =&gt; void,</span>
<span class="token comment">//   date: Date,</span>
<span class="token comment">//   customClass: MyClass,</span>
<span class="token comment">//   obj: {</span>
<span class="token comment">//     prop: &quot;property&quot;,</span>
<span class="token comment">//     clz: MyClass,</span>
<span class="token comment">//     nested: { attr: Date }</span>
<span class="token comment">//   },</span>
<span class="token comment">// }</span>
<span class="token comment">// declare class MyClass {</span>
<span class="token comment">//   toJSON(): &quot;MyClass&quot;;</span>
<span class="token comment">// }</span>
<span class="token comment">// /**</span>
<span class="token comment">//  * type JsonifiedMyObject = {</span>
<span class="token comment">//  *  str: &quot;literalstring&quot;;</span>
<span class="token comment">//  *  fn: never;</span>
<span class="token comment">//  *  date: string;</span>
<span class="token comment">//  *  customClass: &quot;MyClass&quot;;</span>
<span class="token comment">//  *  obj: JsonifiedObject&lt;{</span>
<span class="token comment">//  *    prop: &quot;property&quot;;</span>
<span class="token comment">//  *    clz: MyClass;</span>
<span class="token comment">//  *    nested: {</span>
<span class="token comment">//  *      attr: Date;</span>
<span class="token comment">//  *    };</span>
<span class="token comment">//  *   }&gt;;</span>
<span class="token comment">//  * }</span>
<span class="token comment">// */</span>
<span class="token comment">// type JsonifiedMyObject = Jsonified&lt;MyObject&gt;;</span>
<span class="token comment">// declare let ex: JsonifiedMyObject;</span>
<span class="token comment">// const z1: &quot;MyClass&quot; = ex.customClass;</span>
<span class="token comment">// const z2: string = ex.obj.nested.attr;</span>

<span class="token keyword">type</span> <span class="token class-name">Jsonified<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> object<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>k <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name">object</span>
    <span class="token operator">?</span> <span class="token string">'toJSON'</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span>
      <span class="token operator">?</span> <span class="token constant">T</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'toJSON'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">infer</span> <span class="token constant">R</span>
        <span class="token operator">?</span> <span class="token constant">R</span>
        <span class="token operator">:</span> <span class="token builtin">never</span>
      <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span>
      <span class="token operator">?</span> <span class="token builtin">never</span>
      <span class="token operator">:</span> Jsonified<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">&gt;</span>
    <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">declare</span> <span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
  <span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token string">'MyClass'</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">MyObject</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  str<span class="token operator">:</span> <span class="token string">'literalstring'</span>
  <span class="token function-variable function">fn</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
  date<span class="token operator">:</span> Date
  customClass<span class="token operator">:</span> MyClass
  obj<span class="token operator">:</span> <span class="token punctuation">{</span>
    prop<span class="token operator">:</span> <span class="token string">'property'</span>
    clz<span class="token operator">:</span> MyClass
    nested<span class="token operator">:</span> <span class="token punctuation">{</span> attr<span class="token operator">:</span> Date <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">JsonifiedMyObject</span> <span class="token operator">=</span> Jsonified<span class="token operator">&lt;</span>MyObject<span class="token operator">&gt;</span>

</code></pre></div><h2 id="no-46requireallornone"><a href="#no-46requireallornone" class="header-anchor">#</a> No.46	RequireAllOrNone</h2> <blockquote><p>实现 <code>RequireAllOrNone</code> 工具类型，用于满足以下功能。即当设置 <code>age</code> 属性时，<code>gender</code> 属性也会变成必填。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  gender<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">RequireAllOrNone<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">const</span> p1<span class="token operator">:</span> RequireAllOrNone<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> <span class="token string">'age'</span> <span class="token operator">|</span> <span class="token string">'gender'</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;lolo&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> p2<span class="token operator">:</span> RequireAllOrNone<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> <span class="token string">'age'</span> <span class="token operator">|</span> <span class="token string">'gender'</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;lolo&quot;</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
  gender<span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <h3 id="分析-大致上分为两种情况-all的情况其实是由剩余的那个类型与选择的那几个类型的必选交叉-none的情况需要将选择的那几个类型排除-联想到交叉-将选出的那几个类型变为never-再考虑到类型的可选性-再将选出的那几个类型变为可选-那么最后交叉的结果就是-age-number-undefined-age-undefined"><a href="#分析-大致上分为两种情况-all的情况其实是由剩余的那个类型与选择的那几个类型的必选交叉-none的情况需要将选择的那几个类型排除-联想到交叉-将选出的那几个类型变为never-再考虑到类型的可选性-再将选出的那几个类型变为可选-那么最后交叉的结果就是-age-number-undefined-age-undefined" class="header-anchor">#</a> 分析：大致上分为两种情况，All的情况其实是由剩余的那个类型与选择的那几个类型的必选交叉，none的情况需要将选择的那几个类型排除，联想到交叉，将选出的那几个类型变为never，再考虑到类型的可选性，再将选出的那几个类型变为可选，那么最后交叉的结果就是：age:number|undefined&amp;age:undefined</h3> <h3 id="方法-46"><a href="#方法-46" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 实现 RequireAllOrNone 工具类型，用于满足以下功能。即当设置 age 属性时，gender 属性也会变成必填。具体的使用示例如下所示：</span>
<span class="token comment">// interface Person {</span>
<span class="token comment">//   name: string;</span>
<span class="token comment">//   age?: number;</span>
<span class="token comment">//   gender?: number;</span>
<span class="token comment">// }</span>
<span class="token comment">// type RequireAllOrNone&lt;T, K extends keyof T&gt; = // 你的实现代码</span>
<span class="token comment">// const p1: RequireAllOrNone&lt;Person, 'age' | 'gender'&gt; = {</span>
<span class="token comment">//   name: &quot;lolo&quot;</span>
<span class="token comment">// };</span>
<span class="token comment">// const p2: RequireAllOrNone&lt;Person, 'age' | 'gender'&gt; = {</span>
<span class="token comment">//   name: &quot;lolo&quot;,</span>
<span class="token comment">//   age: 7,</span>
<span class="token comment">//   gender: 1</span>
<span class="token comment">// };</span>

<span class="token comment">//answer✨</span>
<span class="token keyword">type</span> <span class="token class-name">RequireAllOrNone<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> Omit<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>Required<span class="token operator">&lt;</span>Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;&gt;</span> <span class="token operator">|</span> Partial<span class="token operator">&lt;</span>Record<span class="token operator">&lt;</span><span class="token constant">K</span><span class="token punctuation">,</span> <span class="token builtin">never</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">)</span>
<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>
  gender<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">bb</span> <span class="token operator">=</span> RequireAllOrNone<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> <span class="token string">'age'</span> <span class="token operator">|</span> <span class="token string">'gender'</span><span class="token operator">&gt;</span>
<span class="token keyword">const</span> p1<span class="token operator">:</span> RequireAllOrNone<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> <span class="token string">'age'</span> <span class="token operator">|</span> <span class="token string">'gender'</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'lolo'</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> p2<span class="token operator">:</span> RequireAllOrNone<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> <span class="token string">'age'</span> <span class="token operator">|</span> <span class="token string">'gender'</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'lolo'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
  gender<span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">simplify<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">zzz</span> <span class="token operator">=</span> simplify<span class="token operator">&lt;</span>Omit<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> <span class="token string">'age'</span> <span class="token operator">|</span> <span class="token string">'gender'</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span> Partial<span class="token operator">&lt;</span>Record<span class="token operator">&lt;</span><span class="token string">'age'</span> <span class="token operator">|</span> <span class="token string">'gender'</span><span class="token punctuation">,</span> <span class="token builtin">never</span><span class="token operator">&gt;&gt;&gt;</span>

</code></pre></div><h2 id="no-47requireexactlyone"><a href="#no-47requireexactlyone" class="header-anchor">#</a> No.47	RequireExactlyOne</h2> <blockquote><p>实现 <code>RequireExactlyOne</code> 工具类型，用于满足以下功能。即只能包含 <code>age</code> 或 <code>gender</code> 属性，不能同时包含这两个属性。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  gender<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 只能包含Keys中唯一的一个Key</span>
<span class="token keyword">type</span> <span class="token class-name">RequireExactlyOne<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> Keys <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">const</span> p1<span class="token operator">:</span> RequireExactlyOne<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> <span class="token string">'age'</span> <span class="token operator">|</span> <span class="token string">'gender'</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;lolo&quot;</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> p2<span class="token operator">:</span> RequireExactlyOne<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> <span class="token string">'age'</span> <span class="token operator">|</span> <span class="token string">'gender'</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;lolo&quot;</span><span class="token punctuation">,</span>
  gender<span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Error</span>
<span class="token keyword">const</span> p3<span class="token operator">:</span> RequireExactlyOne<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> <span class="token string">'age'</span> <span class="token operator">|</span> <span class="token string">'gender'</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;lolo&quot;</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
  gender<span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <h3 id="分析-利用联合类型-extends-实现分布执行-之后重点是-如何让联合类型规则只有其中某一个生效-在每一个上设置哪些禁止的属性为可选-never-总体由三者交叉而成-无关的那个类型-选出类型中的某一个类型-将另外的那个选出的类型排除"><a href="#分析-利用联合类型-extends-实现分布执行-之后重点是-如何让联合类型规则只有其中某一个生效-在每一个上设置哪些禁止的属性为可选-never-总体由三者交叉而成-无关的那个类型-选出类型中的某一个类型-将另外的那个选出的类型排除" class="header-anchor">#</a> 分析：利用联合类型 extends 实现分布执行，之后重点是 如何让联合类型规则只有其中某一个生效，在每一个上设置哪些禁止的属性为可选 never，总体由三者交叉而成，无关的那个类型&amp;选出类型中的某一个类型&amp;将另外的那个选出的类型排除</h3> <h3 id="方法-47"><a href="#方法-47" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 实现 RequireExactlyOne 工具类型，用于满足以下功能。即只能包含 age 或 gender 属性，不能同时包含这两个属性。具体的使用示例如下所示：</span>
<span class="token comment">// interface Person {</span>
<span class="token comment">//   name: string;</span>
<span class="token comment">//   age?: number;</span>
<span class="token comment">//   gender?: number;</span>
<span class="token comment">// }</span>
<span class="token comment">// // 只能包含Keys中唯一的一个Key</span>
<span class="token comment">// type RequireExactlyOne&lt;T, Keys extends keyof T&gt; = // 你的实现代码</span>
<span class="token comment">// const p1: RequireExactlyOne&lt;Person, 'age' | 'gender'&gt; = {</span>
<span class="token comment">//   name: &quot;lolo&quot;,</span>
<span class="token comment">//   age: 7,</span>
<span class="token comment">// };</span>
<span class="token comment">// const p2: RequireExactlyOne&lt;Person, 'age' | 'gender'&gt; = {</span>
<span class="token comment">//   name: &quot;lolo&quot;,</span>
<span class="token comment">//   gender: 1</span>
<span class="token comment">// };</span>
<span class="token comment">// // Error</span>
<span class="token comment">// const p3: RequireExactlyOne&lt;Person, 'age' | 'gender'&gt; = {</span>
<span class="token comment">//   name: &quot;lolo&quot;,</span>
<span class="token comment">//   age: 7,</span>
<span class="token comment">//   gender: 1</span>
<span class="token comment">// };</span>

<span class="token comment">//answer</span>
<span class="token keyword">type</span> <span class="token class-name">RequireExactlyOne<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> Keys <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token operator">=</span> Keys<span class="token operator">&gt;</span></span> <span class="token operator">=</span> Keys <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span>
  <span class="token operator">?</span> Omit<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span> Required<span class="token operator">&lt;</span>Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> Keys<span class="token operator">&gt;&gt;</span> <span class="token operator">&amp;</span> Partial<span class="token operator">&lt;</span>Record<span class="token operator">&lt;</span>Exclude<span class="token operator">&lt;</span><span class="token constant">K</span><span class="token punctuation">,</span> Keys<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token builtin">never</span><span class="token operator">&gt;&gt;</span>
  <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token comment">// interface Person {</span>
<span class="token comment">//   name: string;</span>
<span class="token comment">//   age?: number;</span>
<span class="token comment">//   gender?: number;</span>
<span class="token comment">// }</span>
<span class="token comment">// const p11: RequireExactlyOne&lt;Person, 'age' | 'gender'&gt; = {</span>
<span class="token comment">//   name: &quot;lolo&quot;,</span>
<span class="token comment">//   age: 7,</span>
<span class="token comment">// };</span>
<span class="token comment">// const p22: RequireExactlyOne&lt;Person, 'age' | 'gender'&gt; = {</span>
<span class="token comment">//   name: &quot;lolo&quot;,</span>
<span class="token comment">//   gender: 1</span>
<span class="token comment">// };</span>
<span class="token comment">// // Error</span>
<span class="token comment">// const p33: RequireExactlyOne&lt;Person, 'age' | 'gender'&gt; = {</span>
<span class="token comment">//   name: &quot;lolo&quot;,</span>
<span class="token comment">//   age: 7,</span>
<span class="token comment">//   gender: 1</span>
<span class="token comment">// };</span>

</code></pre></div><h2 id="no-48consistsonlyof"><a href="#no-48consistsonlyof" class="header-anchor">#</a> No.48	ConsistsOnlyOf</h2> <blockquote><p>实现 <code>ConsistsOnlyOf</code> 工具类型，用于判断 <code>LongString</code> 字符串类型是否由 0 个或多个 <code>Substring</code> 字符串类型组成。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">ConsistsOnlyOf<span class="token operator">&lt;</span>LongString <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> Substring <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C0</span></span> <span class="token operator">=</span> ConsistsOnlyOf<span class="token operator">&lt;</span><span class="token string">'aaa'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token operator">&gt;</span> <span class="token comment">//=&gt; true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C1</span></span> <span class="token operator">=</span> ConsistsOnlyOf<span class="token operator">&lt;</span><span class="token string">'ababab'</span><span class="token punctuation">,</span> <span class="token string">'ab'</span><span class="token operator">&gt;</span> <span class="token comment">//=&gt; true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C2</span></span> <span class="token operator">=</span> ConsistsOnlyOf<span class="token operator">&lt;</span><span class="token string">'aBa'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token operator">&gt;</span> <span class="token comment">//=&gt; false</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C3</span></span> <span class="token operator">=</span> ConsistsOnlyOf<span class="token operator">&lt;</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token operator">&gt;</span> <span class="token comment">//=&gt; true</span>
</code></pre></div></blockquote> <h3 id="分析-依次对字符串进行探测-是否extends-substring-infer-rest-随着不断的探测-字符串也逐渐的缩短-直至为-就说明为true"><a href="#分析-依次对字符串进行探测-是否extends-substring-infer-rest-随着不断的探测-字符串也逐渐的缩短-直至为-就说明为true" class="header-anchor">#</a> 分析：依次对字符串进行探测，是否extends<code>${Substring}${infer Rest}</code>,随着不断的探测，字符串也逐渐的缩短，直至为‘’就说明为true</h3> <h3 id="方法-48"><a href="#方法-48" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">ConsistsOnlyOf<span class="token operator">&lt;</span>LongString <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> Substring <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> LongString <span class="token keyword">extends</span> <span class="token string">''</span>
  <span class="token operator">?</span> <span class="token boolean">true</span>
  <span class="token operator">:</span> LongString <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Substring<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">B</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token operator">?</span> ConsistsOnlyOf<span class="token operator">&lt;</span><span class="token constant">B</span><span class="token punctuation">,</span> Substring<span class="token operator">&gt;</span>
  <span class="token operator">:</span> <span class="token boolean">false</span>

</code></pre></div><h2 id="no-49uniontoarray"><a href="#no-49uniontoarray" class="header-anchor">#</a> No.49	UnionToArray</h2> <blockquote><p>实现 <code>UnionToArray</code> 工具类型，用于将联合类型转换成元组类型。具体的使用示例如下所示：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">UnionToArray<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token comment">// 你的实现代码</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A0</span></span> <span class="token operator">=</span> UnionToArray<span class="token operator">&lt;</span><span class="token string">'aaa'</span> <span class="token operator">|</span> <span class="token string">'bbb'</span> <span class="token operator">|</span> <span class="token string">'ccc'</span><span class="token operator">&gt;</span> <span class="token comment">//=&gt; ['aaa' , 'bbb' , 'ccc']</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A1</span></span> <span class="token operator">=</span> UnionToArray<span class="token operator">&lt;</span><span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">3</span> <span class="token operator">&gt;</span> <span class="token comment">//=&gt; [1, 2, 3]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A2</span></span> <span class="token operator">=</span> UnionToArray<span class="token operator">&lt;</span><span class="token punctuation">{</span>type<span class="token operator">:</span><span class="token string">'input'</span><span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span>type<span class="token operator">:</span><span class="token string">'select'</span><span class="token punctuation">,</span>hasOptions<span class="token operator">:</span><span class="token builtin">boolean</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token comment">//=&gt; [{type:'input'} ,{type:'select',hasOptions:boolean}]</span>
</code></pre></div></blockquote> <h3 id="分析-联合转元组-那么就一定要取出每一个类型放到一个数组中-联合类型由于extends分发的缘故所以无法直接从联合类型中取类型-所以可以先转为交叉类型-再对交叉类型依次取出最后一个类型-最后再对联合类型中的剩余类型进行递归"><a href="#分析-联合转元组-那么就一定要取出每一个类型放到一个数组中-联合类型由于extends分发的缘故所以无法直接从联合类型中取类型-所以可以先转为交叉类型-再对交叉类型依次取出最后一个类型-最后再对联合类型中的剩余类型进行递归" class="header-anchor">#</a> 分析：联合转元组，那么就一定要取出每一个类型放到一个数组中，联合类型由于extends分发的缘故所以无法直接从联合类型中取类型，所以可以先转为交叉类型，再对交叉类型依次取出最后一个类型，最后再对联合类型中的剩余类型进行递归</h3> <h3 id="方法-49"><a href="#方法-49" class="header-anchor">#</a> 方法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 实现 UnionToArray 工具类型，用于将联合类型转换成元组类型。具体的使用示例如下所示：</span>
<span class="token comment">// type UnionToArray&lt;U&gt; = // 你的实现代码</span>
<span class="token comment">// type A0 = UnionToArray&lt;'aaa' | 'bbb' | 'ccc'&gt; //=&gt; ['aaa' , 'bbb' , 'ccc']</span>
<span class="token comment">// type A1 = UnionToArray&lt;1 | 2 | 3 &gt; //=&gt; [1, 2, 3]</span>
<span class="token comment">// type A2 = UnionToArray&lt;{type:'input'} | {type:'select',hasOptions:boolean}&gt; //=&gt; [{type:'input'} ,{type:'select',hasOptions:boolean}]</span>
<span class="token keyword">type</span> <span class="token class-name">UnionToIntersection1<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span> <span class="token operator">?</span> <span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">I</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token operator">?</span> <span class="token constant">I</span> <span class="token operator">:</span> <span class="token builtin">never</span>

<span class="token keyword">type</span> <span class="token class-name">UnionToTuple1<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> UnionToIntersection1<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span> <span class="token operator">?</span> <span class="token punctuation">(</span>t<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token operator">&gt;</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span>_<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">infer</span> <span class="token constant">W</span>
  <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token operator">...</span>UnionToTuple1<span class="token operator">&lt;</span>Exclude<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">W</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">,</span> <span class="token constant">W</span><span class="token punctuation">]</span>
  <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A00</span></span> <span class="token operator">=</span> UnionToTuple1<span class="token operator">&lt;</span><span class="token string">'aaa'</span> <span class="token operator">|</span> <span class="token string">'bbb'</span> <span class="token operator">|</span> <span class="token string">'ccc'</span><span class="token operator">&gt;</span> <span class="token comment">//=&gt; ['aaa' , 'bbb' , 'ccc']</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A11</span></span> <span class="token operator">=</span> UnionToTuple1<span class="token operator">&lt;</span><span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">3</span><span class="token operator">&gt;</span> <span class="token comment">//=&gt; [1, 2, 3]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A22</span></span> <span class="token operator">=</span> UnionToTuple1<span class="token operator">&lt;</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'input'</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'select'</span><span class="token punctuation">;</span> hasOptions<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token comment">//=&gt; [{type:'input'} ,{type:'select',hasOptions:boolean}]</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/chuting.github.io/typescript/TS基础.html" class="prev">
        TS基础
      </a></span> <span class="next"><a href="/chuting.github.io/http/HTTP.html">
        HTTP
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/chuting.github.io/assets/js/app.ddf6de4f.js" defer></script><script src="/chuting.github.io/assets/js/2.32e0a827.js" defer></script><script src="/chuting.github.io/assets/js/15.83dbb93a.js" defer></script>
  </body>
</html>
